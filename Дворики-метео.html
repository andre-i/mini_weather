<!DOCTYPE html>
<!-- saved from url=(0129)file:///home/user/proj/Git/mini_weather/thingspeak/%D0%94%D0%B2%D0%BE%D1%80%D0%B8%D0%BA%D0%B8-%D0%BC%D0%B5%D1%82%D0%B5%D0%BE.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script>
    // debug mode
    var debug = false;
    var DEBUG = false;
	
	// error handler
    window.addEventListener('onerror', function (e) {
        console.log("cath in window");
    });
    
    function showError(mess) {
        owner.innerHTML = '';
        document.getElementById('errorConsole').innerHTML = '<h2 align="center">' + mess + '</h2>';
    }

    var svgns = 'http://www.w3.org/2000/svg';
	
    // месяцы
    var monthName = {01: 'янв', 02: 'февр', 03: 'март', 04: 'апр', 05: 'май', 06: 'июнь', 07: 'июль',
        08: 'авг', 09: 'сен', 10: 'окт', 11: 'нояб', 12: 'дек'};
    var monthLen = {
        01: 31, 02: 28, 03: 31, 04: 30, 05: 31, 06: 30, 07: 31, 08: 31, 09: 30, 10: 31, 11: 30, 12: 31
    };
    //  запрос к серверу
    function get(url, callback) {
        if (!navigator.onLine) {
            throw new Error("&nbsp; <br><big>Нет соединения с интернет!</big><br><small>Проверьте соединение.</small>");
        }
        var request = new XMLHttpRequest();
        request.open("GET", url);
        request.onreadystatechange = function () {
            if (request.readyState === 4) {
                if (request.status === 200) {
                    //debug
                    //if (debug)console.log("Success get answer on:" + url);
                    var type = request.getResponseHeader("Content-Type");
                    if (type.indexOf("xml") !== -1 && request.responseXML)
                        callback(request.responseXML);              // Объект XML
                    else if (type === "application/json")
                        callback(JSON.parse(request.responseText)); // Объект JSON
                    else callback(request.responseText); // строка
                } else if (request.status > 490) {
                    throw new Error("Сервер не отвечает попробуйте ещё раз");
                } else if (request.status > 203) {
                    throw new Error("Bad request can`t send right answer(Неверный запрос)</h2><hr width='50%'><h2>Проверить  правильность запроса на Thingspeak.com</h2>");
                }
            }
        };
        request.onerror = function (e) {
            console.log(" ERROR on GET [ Ошибка получения данных для отображения ]");
        }
        request.send(null); // отправить запрос
    }
    //   поля запросов значений
    var currentChannel = {
        id: 495353,
        tIn: 1,
        tOut: 2,
        baro: 4,
        humid: 3,
        all: -1
    };
    var byTimeChannel = {
        id: 573027,
        tIn: 1,
        tOut: 2,
        humid: 3,
        baro: 4,
        tInD: 5,
        tOutD: 6,
        humidD: 7,
        baroD: 8
    };

    /**
     *  URL for lastValues or choosed period
     * @param id  channel number on Thingspeak.com
     * @param field  field on Thingspeak.com
     * @param requestValue number of last values or period object { first: '...' , second: '...' }
     * @returns {string}
     */
    var getUrl = function getUrlResultsRequest(channelId, fieldId, requestValue) {
        var tail;
        if (isNaN(requestValue)) {
            tail = 'start=' + validateFirst(requestValue.first) + '%2019:00:00&end=' +
                    requestValue.second + '%2022:00:00';
        }else{
            tail = 'results=' + requestValue;
        }
        return 'https://api.thingspeak.com/channels/' + channelId + '/fields/' + fieldId + '.json?' + tail;
        function validateFirst(first) {
            var numDay = parseInt(first.substr(8, 2));
            var ins = '';
            if (numDay > 1) {
                numDay -= 1;
                ins = (numDay < 10) ? '0' : '';
                return first.substr(0, 8) + ins + numDay;
            }
            monthNum = parseInt(first.substr(5, 2));
            if (monthNum > 1) {
                monthNum -= 1;
                ins = (monthNum < 10) ? '0' : '';
                numDay = monthLen[monthNum];
                return first.substr(0, 5) + ins + monthNum + '-' + numDay;
            }
            // if 31 dec
            monthNum = 12;
            numDay = 31;
            var yearNum = parseInt(first.substr(0, 4)) - 1;
            return yearNum + '-' + monthNum + '-' + numDay;
        }
    }
    /*
     return object appropriate checked sensor and period
     */
    function getParam(name, channel, request, isByDays){
        //  if request for days - fields must be  shift on 4 ( values may be 5,6,7,8
        var shiftForByDaysRequest = (isByDays) ? 4 : 0;
        var current = {};
        current.labels = {};
        current.labels.x = 'время';
        current.name = (shiftForByDaysRequest) ? name + 'D': name ;
        current.fieldNum = channel[name] + shiftForByDaysRequest;
        current.field = 'field' + current.fieldNum;
        current.channelId = channel.id;
        current.url = getUrl(current.channelId, current.fieldNum, request);
        switch(name){
            case 'tIn':
                current.labels.y =  ' t℃';
                current.chartName = '&nbsp;Температура помещение';
                current.chartColor = '#e19';
                return current;
            case 'tOut':
                current.labels.y =  ' t℃';
                current.chartName = '&nbsp;Температура улица';
                current.chartColor = '#f75';
                return current;
            case 'baro':
                current.labels.y =  ' мм.рт.ст';
                current.chartName = '&nbsp;Давление';
                current.chartColor = '#67f';
                return current;
            case 'humid':
                current.labels.y =  ' %';
                current.chartName = '&nbsp;Относительная влажность (помещение)';
                current.chartColor = '#3d6';
                return current;
        }
    }


//
</script>
<style type="text/css">

    button {
        font-size: 120%;
        margin-right: 0.5em;
        margin-bottom: 0.6em;
        padding: 0.2em 0.2em 0.2em 0.2em;
        border: 2px solid;
        border-radius: 6px;
        background-color: #dee;
    }

    option, select {
        font-size: 120%;
        background-color: #dee;
    }

    input {
        border: 1px solid #146;
        border-radius: 0.2em;
        padding-left: 0.3em;
    }

    header {
        color: #146;
    }

    .head{
        background-color: #eed;
        padding-left: 0.6em;
        border: 1px solid #973;
        border-radius: 0.5em;
    }

    .big {
        font-size: 120%;
    }

    .bordered {
        border: 2px solid #146;
        border-radius: 0.4em;
        margin: 0.4em auto;
    }

    .center {
        /*   display: flex;
         justify-content: center; /*Центрирование по горизонтали
        align-items: center;     */
         text-align: center;
         margin: auto;
    }

    .left {
        float: left;
    }

    .right {
        float: right;
    }

    .inlineTop {
        display: inline-block;
        vertical-align: top;
    }

    .inlineCenter {
        display: inline-block;
        vertical-align: middle;
    }

    .large {
        font-size: 150%;
    }

    .red {
        color: red;
        background-color: #eaffff;
    }


    /*
    ======================  IMAGES  =========================

    */

    .wavesBackGround {
        margin: 0.4em 0.8em 1em 0.8em;
        background-color: #cfddb2;
        background-image: url("data:image/svg+xml,%3Csvg width='100' height='20' viewBox='0 0 100 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M21.184 20c.357-.13.72-.264 1.088-.402l1.768-.661C33.64 15.347 39.647 14 50 14c10.271 0 15.362 1.222 24.629 4.928.955.383 1.869.74 2.75 1.072h6.225c-2.51-.73-5.139-1.691-8.233-2.928C65.888 13.278 60.562 12 50 12c-10.626 0-16.855 1.397-26.66 5.063l-1.767.662c-2.475.923-4.66 1.674-6.724 2.275h6.335zm0-20C13.258 2.892 8.077 4 0 4V2c5.744 0 9.951-.574 14.85-2h6.334zM77.38 0C85.239 2.966 90.502 4 100 4V2c-6.842 0-11.386-.542-16.396-2h-6.225zM0 14c8.44 0 13.718-1.21 22.272-4.402l1.768-.661C33.64 5.347 39.647 4 50 4c10.271 0 15.362 1.222 24.629 4.928C84.112 12.722 89.438 14 100 14v-2c-10.271 0-15.362-1.222-24.629-4.928C65.888 3.278 60.562 2 50 2 39.374 2 33.145 3.397 23.34 7.063l-1.767.662C13.223 10.84 8.163 12 0 12v2z' fill='%23f7f7d9' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E");
    }

    .brown {
        background-color: #ba9;
        background-image: url("data:image/svg+xml,%3Csvg width='10' height='10' viewBox='2 2 8 8' xmlns='http://www.w3.org/2000/svg' %3E    %3Cline x1='0' y1='8' x2='8' y2='0' stroke='#bab988' stroke-width='0.1' /%3E %3Cline x1='2' y1='10' x2='10' y2='2' stroke='#bab948' stroke-width='0.1' /%3E            %3Cline x1='6' y1='10' x2='10' y2='6' stroke='#bab988' stroke-width='0.1' /%3E            %3Cline x1='4' y1='0' x2='10' y2='6' stroke='#bab948' stroke-width='0.1' /%3E            %3Cline x1='0' y1='0' x2='10' y2='10' stroke='#bab988' stroke-width='0.1' /%3E            %3Cline x1='0' y1='4' x2='6' y2='10' stroke='#bab948' stroke-width='0.1' /%3E            %3Ccircle cx='4' cy='4' r='0.5' stroke='#daf988' stroke-width='0.1' fill='#ba9'/%3E            %3Ccircle cx='4' cy='8' r='0.5' stroke='#daf988' stroke-width='0.1' fill='#ab6' /%3E            %3Ccircle cx='8' cy='4' r='0.5' stroke='#daf988' stroke-width='0.1' fill='#ab6' /%3E            %3Ccircle cx='8' cy='8' r='0.5' stroke='#daf988' stroke-width='0.1' fill='#ba9' /%3E %3C/svg%3E");
    }

    .mix {
        background-color: rgba(254, 250, 200, 0.6);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='32 -32 1000 2000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cg%3E%3Cg transform='translate(-128.000000,511.000000) scale(0.100000,-0.100000)'%3E%3Cpath fill='#61f' d='M5539.7,4981.5c-58.4-15.2-160.1-54.1-222.9-88.7c-231.5-125.5-274.8-194.7-817.9-1311.2c-274.8-564.7-984.5-2014.4-1573-3221.8L1852.7-1836.5l194.7-1384.8c106-761.6,199.1-1406.4,203.4-1434.6c17.3-71.4,88.7-134.2,157.9-134.2c39,0,484.7,244.5,1309.1,718.4l1248.5,720.5l1568.7,3211c863.3,1765.6,1579.6,3252.1,1592.5,3304c41.1,155.8,15.1,432.7-51.9,577.7c-97.4,214.2-240.2,341.9-564.7,499.8c-1544.9,757.3-1581.7,772.5-1776.4,768.1C5686.9,5009.6,5600.3,4996.6,5539.7,4981.5z M5907.6,4771.6c157.9-43.3,1748.3-839.5,1824-913.1c162.3-155.8,240.2-396,196.9-601.5c-13-58.4-149.3-365.7-302.9-679.4l-279.1-573.4l-188.3,93c-106,54.1-716.2,352.7-1358.8,664.3c-642.7,313.7-1170.6,571.2-1174.9,573.4c-2.2,2.2,121.2,261.8,274.8,577.7c283.5,584.2,370,718.4,508.5,789.8C5576.5,4791,5749.6,4814.8,5907.6,4771.6z M5898.9,2475.8c735.7-359.2,1339.4-662.1,1339.4-672.9c0-23.8-2375.8-4887.9-2399.6-4911.7c-13-13-2659.2,1257.1-2711.2,1302.6c-10.8,8.7,495.5,1060.2,1120.8,2339c627.5,1278.8,1166.3,2386.6,1200.9,2462.3c34.6,73.6,73.6,134.2,86.5,134.2C4548.7,3129.3,5163.2,2835,5898.9,2475.8z M3603.2-2766.9c553.9-270.5,1014.8-497.7,1023.4-508.5c10.8-8.7-354.9-229.3-809.2-491.2l-826.5-478.2l-305.1,149.3c-259.6,125.5-307.3,158-322.4,207.7c-17.3,67.1-253.2,1741.8-253.2,1804.6C2110.2-2037.7,2090.7-2026.9,3603.2-2766.9z'/%3E%3C/g%3E%3C/g%3E%3Cg%3E%3Cg transform='translate(64.000000,1256.000000) scale(0.100000,-0.100000)'%3E%3Cpath d='M4784.5,5000.9c-356.1-68.9-683.5-365.7-798.3-727.5c-101.5-315.9-30.6-719.8,166.6-957.2c28.7-34.5,40.2-57.4,24.9-51.7c-716,289.1-1081.7,338.8-1198.4,158.9c-80.4-124.4-11.5-359.9,164.6-551.4l99.6-109.1l-95.7-103.4c-185.7-195.3-256.5-438.4-164.6-560.9l40.2-51.7l-111-135.9c-61.3-72.7-158.9-210.6-218.2-306.3C2380,1105,2217.2,593.9,2033.4-472.5c-86.1-493.9-124.4-629.8-224-804.1c-91.9-157-394.4-463.3-660.5-666.2C710.6-2281.6,521-2584.1,521-2951.7c1.9-526.5,382.9-957.2,1139.1-1282.7c1692.4-727.5,4989-727.5,6681.4,0c639.4,275.7,1010.8,626,1110.4,1047.2c78.5,335-15.3,673.9-264.2,943.8c-61.3,68.9-222.1,214.4-354.2,323.6c-134,109.1-304.4,262.3-381,338.9c-314,321.6-358,430.8-484.4,1165.9c-212.5,1234.8-413.5,1749.8-943.8,2423.7c-32.5,42.1-32.5,45.9,0,95.7c84.2,128.3,11.5,363.8-170.4,555.2l-95.7,103.4l99.5,109.1c130.2,141.7,197.2,285.2,197.2,421.2c0,111-28.7,158.9-128.3,210.6c-128.2,67-492,0-915.1-166.6c-103.4-40.2-187.6-70.8-187.6-67c0,3.8,28.7,49.8,65.1,103.4c189.5,281.4,227.8,660.5,99.5,976.4C5795.3,4824.8,5291.8,5096.6,4784.5,5000.9z M5146.3,4438.1c354.2-105.3,474.8-576.3,214.4-836.6c-91.9-91.9-195.3-135.9-335-145.5c-139.8-9.6-281.4,45.9-386.7,151.2c-199.1,197.2-180,545.6,38.3,731.3C4813.2,4457.2,4972.1,4489.8,5146.3,4438.1z M4261.9,2299.6c-7.7-13.4-224-336.9-480.5-717.9c-254.6-382.9-461.4-694.9-455.6-694.9c3.8,0,157,47.9,336.9,105.3c180,57.4,338.9,105.3,350.3,105.3c13.4,0,93.8-141.7,180-317.8L4348,463.7l26.8,63.2c13.4,34.5,157,413.5,319.7,844.3c162.7,428.8,300.6,779.2,306.3,779.2c5.7,0,143.6-350.3,306.3-779.2c162.7-430.8,306.3-809.8,319.7-844.3l26.8-63.2l155.1,315.9c86.2,176.1,166.6,317.8,180,317.8c11.5,0,170.4-47.9,350.4-105.3s333.1-105.3,336.9-105.3c5.7,0-199.1,312.1-455.6,694.9c-256.5,381-472.9,704.5-480.5,717.9c-24.9,42.1,157-59.3,342.7-191.4c227.8-160.8,545.6-480.5,694.9-700.7c314-459.5,478.6-966.8,652.8-1996.8c88.1-513.1,124.4-650.9,243.1-880.7c147.4-287.2,379.1-536,853.9-922.8c111-91.9,225.9-193.4,254.6-225.9c191.4-229.7,183.8-465.2-23-689.2c-135.9-145.5-279.5-243.1-530.3-363.7c-509.2-241.2-1307.6-423.1-2232.2-507.3c-430.8-40.2-1485.6-45.9-1885.7-9.6c-1418.6,122.5-2419.9,425-2846.8,855.7c-283.3,283.4-229.7,612.6,145.5,882.6c321.6,233.6,685.4,591.6,844.3,834.7c178,275.7,229.7,438.4,335,1066.3c204.8,1221.4,425,1768.9,917,2283.9c208.7,218.3,352.3,335,585.8,482.4C4271.4,2330.3,4282.9,2336,4261.9,2299.6z'/%3E%3Cpath d='M4263.8-2082.5c-897.9-70.8-1625.4-254.6-1994.9-501.6c-281.4-187.6-331.2-382.9-149.3-585.8c499.7-551.4,2655.3-817.5,4345.8-536c800.2,134,1366.9,375.2,1491.4,637.5c216.3,455.6-725.6,869.2-2255.2,987.8c-135.9,11.5-279.5,19.2-319.7,19.2h-74.7v-239.3v-239.3l78.5-78.5c224-224,212.5-578.2-24.9-792.6c-210.6-189.5-509.2-189.5-719.8,0c-187.6,168.5-239.3,425-130.2,649c28.7,59.3,82.3,132.1,118.7,160.8l65.1,51.7v245v243.1l-118.7-1.9C4508.8-2065.3,4369.1-2073,4263.8-2082.5z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    /* влажно */
    .wet{
    background-color: rgba(220, 215, 245, 0.7);
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cg%3E%3Cg transform='translate(0.000000,511.000000) scale(0.100000,-0.100000)'%3E%3Cpath fill='#45f' d='M4932.8,4791c-216.6-770.7-583.7-1445.6-1436.5-2633.5C2940,1379.9,2639,935.3,2454.4,613.8c-508.5-882.4-722.8-1744.3-640.7-2581.1c77.5-800.3,335.2-1400,809.4-1899.3c428.7-446.9,944-722.8,1632.6-873.3c209.8-45.6,303.2-50.2,752.4-50.2c554.1,0,750.1,27.4,1153.7,159.6c1201.6,392.2,1960.8,1413.7,2033.8,2740.7C8254.9-843.1,7979,9.6,7212.9,1156.5c-98.1,148.2-376.2,542.7-613.3,875.6c-690.9,962.2-994.1,1450.1-1240.4,1990.5c-120.8,266.8-289.6,736.5-316.9,893.8c-9.1,45.6-22.8,88.9-31.9,93.5C5003.5,5014.4,4967,4916.4,4932.8,4791z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .yesWet{
        background-color: rgba(220, 215, 245, 0.7);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cg%3E%3Cg transform='translate(-64.000000,511.000000) scale(0.100000,-0.100000)'%3E%3Cpath fill='#45f' d='M4932.8,4791c-216.6-770.7-583.7-1445.6-1436.5-2633.5C2940,1379.9,2639,935.3,2454.4,613.8c-508.5-882.4-722.8-1744.3-640.7-2581.1c77.5-800.3,335.2-1400,809.4-1899.3c428.7-446.9,944-722.8,1632.6-873.3c209.8-45.6,303.2-50.2,752.4-50.2c554.1,0,750.1,27.4,1153.7,159.6c1201.6,392.2,1960.8,1413.7,2033.8,2740.7C8254.9-843.1,7979,9.6,7212.9,1156.5c-98.1,148.2-376.2,542.7-613.3,875.6c-690.9,962.2-994.1,1450.1-1240.4,1990.5c-120.8,266.8-289.6,736.5-316.9,893.8c-9.1,45.6-22.8,88.9-31.9,93.5C5003.5,5014.4,4967,4916.4,4932.8,4791z'/%3E%3C/g%3E%3C/g%3E%3Cg%3E%3Cg%3E%3Cpath fill='#0f0' d='M380.6,990c-30.5,0-59.3-14.2-77.8-38.7L52.6,620.8c-32.6-42.9-24.1-104,18.9-136.6c43.1-32.7,104.2-24.1,136.7,18.9l164.6,217.3L786.7,55.9c28.5-45.6,88.7-59.6,134.5-31.2c45.7,28.4,59.8,88.6,31.2,134.4L463.4,943.9c-16.9,27.4-46.3,44.5-78.4,45.9C383.5,990,382.1,990,380.6,990L380.6,990z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .noWet{
        background-color: rgba(220, 215, 245, 0.7);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cg%3E%3Cg transform='translate(-64.000000,511.000000) scale(0.100000,-0.100000)'%3E%3Cpath fill='#45f' d='M4932.8,4791c-216.6-770.7-583.7-1445.6-1436.5-2633.5C2940,1379.9,2639,935.3,2454.4,613.8c-508.5-882.4-722.8-1744.3-640.7-2581.1c77.5-800.3,335.2-1400,809.4-1899.3c428.7-446.9,944-722.8,1632.6-873.3c209.8-45.6,303.2-50.2,752.4-50.2c554.1,0,750.1,27.4,1153.7,159.6c1201.6,392.2,1960.8,1413.7,2033.8,2740.7C8254.9-843.1,7979,9.6,7212.9,1156.5c-98.1,148.2-376.2,542.7-613.3,875.6c-690.9,962.2-994.1,1450.1-1240.4,1990.5c-120.8,266.8-289.6,736.5-316.9,893.8c-9.1,45.6-22.8,88.9-31.9,93.5C5003.5,5014.4,4967,4916.4,4932.8,4791z'/%3E%3C/g%3E%3C/g%3E%3Cg%3E%3Cpath fill='#f00' d='M990,168.5L831.5,10L500,341.6L168.5,10L10,168.5L341.6,500L10,831.5L168.5,990L500,658.4L831.5,990L990,831.5L658.4,500L990,168.5z'/%3E%3C/g%3E%3C/svg%3E");
    }

    .cool{
        background-color: rgba(220, 215, 245, 0.7);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!-- Svg Vector Icons : http://www.onlinewebfonts.com/icon --%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cmetadata%3E Svg Vector Icons : http://www.onlinewebfonts.com/icon %3C/metadata%3E%3Cg%3E%3Cg transform='translate(0.000000,511.000000) scale(0.100000,-0.100000)'%3E%3Cpath d='M4699.5,5013.9c-200.1-35.9-433.6-120.6-620.9-223.2c-130.9-71.8-313-236-839-759.5c-372-369.5-692.8-710.7-715.8-759.5c-61.6-125.7-74.4-336.1-33.3-484.9c25.7-97.5,82.1-169.3,300.2-395.1c151.4-156.5,261.7-289.9,254-307.9c-5.1-20.5-649.1-859.5-1429.1-1867.9c-780-1008.3-1442-1885.8-1467.6-1947.4c-120.6-266.8-10.3-608.1,297.6-916c246.3-246.3,464.4-354.1,738.9-366.9c313-12.8,338.7,5.1,959.6,697.9l536.2,595.3l18-397.7c12.8-218.1,35.9-803.1,56.4-1298.3c33.4-880.1,35.9-900.6,102.6-1028.9c35.9-71.8,107.8-166.8,161.7-210.4c192.4-159.1,184.7-159.1,2050-151.4c1590.7,7.7,1696,10.2,1780.6,56.4c128.3,66.7,251.4,189.9,313,310.4c64.1,123.2,79.5,310.4,125.7,1654.9c15.4,515.7,38.5,957,48.8,985.3c12.8,38.5,115.5-61.6,536.2-531.1c605.5-674.8,633.7-695.3,946.7-682.5c274.5,12.8,492.6,120.6,738.9,366.9c225.8,228.3,325.8,420.8,338.7,656.8c7.7,136-2.6,187.3-51.3,282.2C9813-1644.2,9156.2-779.5,8386.5,216c-767.2,995.5-1408.6,1824.3-1418.9,1844.8c-15.4,23.1,51.3,107.8,223.2,282.2c297.6,300.2,361.8,413.1,361.8,644c0,272-53.9,343.8-746.7,1028.9c-726.1,721-851.8,813.3-1277.7,944.2C5323,5024.2,4912.5,5049.9,4699.5,5013.9z M5466.7,4554.7c277.1-87.2,438.7-215.5,1059.6-844.1c325.8-328.4,597.8-610.7,610.6-628.6c10.3-15.4,20.5-64.1,20.5-105.2c0-61.6-59-136-348.9-428.5c-343.8-343.8-351.5-356.6-336.1-443.9c15.4-100.1-66.7,7.7,1888.4-2517c1221.3-1580.5,1185.4-1524.1,1090.4-1713.9c-156.5-300.2-546.5-554.2-741.5-479.8c-33.3,12.8-361.8,359.2-731.2,767.2c-369.5,410.5-679.9,746.6-690.2,746.6c-7.7,0-87.2-25.7-174.5-56.4c-143.7-48.7-161.6-64.2-171.9-133.4c-7.7-43.6-30.8-615.8-53.9-1272.6c-56.5-1696-56.5-1690.8-143.7-1775.5l-69.3-71.8h-733.8h-733.8l2.6,2945.5V1486l697.9,577.3c382.3,318.2,723.5,615.8,754.3,662c71.8,110.3,94.9,256.6,59,392.6c-51.3,192.4-623.5,733.8-1026.3,972.4c-464.4,277.1-895.4,284.8-1352.2,23.1c-313-179.6-933.9-736.4-1010.9-908.3c-64.1-141.1-61.6-310.5,10.3-449C3421.7,2597,4348,1817,4599.4,1693.9l177-82.1l5.1-3007.1l7.7-3007.1h-715.9h-713.3l-82.1,74.4l-82.1,71.8l-18,407.9c-10.3,225.8-38.5,910.8-61.6,1524.1c-25.7,613.2-46.2,1118.7-48.7,1121.2c-2.6,2.6-82.1,35.9-177,71.8l-171.9,64.2l-662-738.9c-364.3-405.4-682.5-751.8-705.6-772.3c-23.1-17.9-89.8-33.3-148.8-33.3c-205.3,2.6-482.4,195-613.2,425.9C442.9-1934.1,332.6-2106,2061.9,126.2l1549.7,2001.3l-369.5,374.6c-364.3,366.9-369.5,374.6-369.5,487.5v112.9l636.3,631.2c682.5,679.9,803.1,769.7,1149.5,857C4863.7,4641.9,5246,4626.5,5466.7,4554.7z M5346.1,3813.2c87.2-38.5,243.8-133.4,348.9-213c264.3-197.5,641.4-556.8,641.4-610.6c0-28.2-261.7-264.3-667.1-602.9l-669.7-556.8l-603,508c-331,279.7-626,523.4-654.3,543.9c-28.2,18-48.7,64.1-48.7,102.6c0,56.5,59,123.2,289.9,333.6C4609.7,3890.1,4922.7,4005.6,5346.1,3813.2z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .hot{
        background-color: rgba(240, 180, 200, 0.7);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!-- Svg Vector Icons : http://www.onlinewebfonts.com/icon --%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cmetadata%3E Svg Vector Icons : http://www.onlinewebfonts.com/icon %3C/metadata%3E%3Cg%3E%3Cpath d='M990,464.2c-4.5-94.4-43-178-111.4-241.8c-62.9-58.6-149.7-99.4-250.9-117.9c-20.7-3.8-40.8,9.2-45.8,29.7c-7.9,32.1-42.3,55.5-81.8,55.5c-39.4,0-73.8-23.3-81.8-55.5c-5-20.4-25.1-33.4-45.8-29.7c-101.3,18.5-188.1,59.2-250.9,117.9C53,286.2,14.5,369.8,10,464.2c-0.5,10.9,3.5,21.5,11,29.4c7.5,7.9,17.9,12.3,28.8,12.3h145.1V790c0,58.5,47.6,106.1,106.2,106.1h397.9c58.5,0,106.2-47.6,106.2-106.1V505.9h145.1c10.9,0,21.3-4.5,28.8-12.3C986.5,485.7,990.5,475,990,464.2L990,464.2z M805.1,426.2v-27.3c0-22-17.8-39.8-39.8-39.8s-39.8,17.8-39.8,39.8V790c0,14.6-11.9,26.5-26.5,26.5H301.1c-14.6,0-26.5-11.9-26.5-26.5V398.9c0-22-17.8-39.8-39.8-39.8s-39.8,17.8-39.8,39.8v27.3H94.6c22.7-116.1,116.9-201.9,260.9-236.7c10.6,18.4,25.3,34.8,43.4,47.8c28.6,20.7,64.5,32,101.1,32c36.6,0,72.5-11.4,101.2-32c18-13,32.8-29.4,43.4-47.8c144,34.8,238.1,120.6,260.8,236.7L805.1,426.2L805.1,426.2z'/%3E%3C/g%3E%3C/svg%3E");
    }

    .coat{
        background-color: rgba(180, 220, 200, 0.7);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!-- Svg Vector Icons : http://www.onlinewebfonts.com/icon --%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cmetadata%3E Svg Vector Icons : http://www.onlinewebfonts.com/icon %3C/metadata%3E%3Cg%3E%3Cg transform='translate(0.000000,512.000000) scale(0.100000,-0.100000)'%3E%3Cpath d='M4645.2,5018c-335.6-34.5-763.3-132.3-901.4-205.2c-30.7-15.3-82.5-57.5-115.1-90.1c-30.7-34.5-132.3-130.4-226.3-214.8l-166.9-153.4l-437.3-134.2c-477.5-147.7-546.6-182.2-870.7-441.1c-303-239.7-565.8-558.1-723-872.6c-32.6-67.1-95.9-230.1-138.1-364.4c-44.1-136.2-216.7-590.7-385.5-1012.6C357,722.1,284.1,530.3,171,187l-71-211v-1635.9v-1637.8l63.3-55.6l61.4-55.6h740.3c803.6,0,832.3,3.8,870.7,107.4c11.5,28.8,19.2,529.3,19.2,1244.7v1196.7l53.7,149.6c30.7,82.5,118.9,293.4,197.5,471.8l141.9,320.3l9.6-2366.6c9.6-2364.7,9.6-2368.5,49.9-2422.2c21.1-28.8,61.4-59.4,86.3-65.2c59.5-17.3,5153.1-17.3,5212.6,0c24.9,5.8,65.2,36.4,86.3,65.2c40.3,53.7,40.3,57.5,49.9,2422.2L7752,81.5L7894-238.7c78.6-178.3,166.8-389.3,197.5-471.8l53.7-149.6v-1198.6c0-1306-1.9-1290.7,107.4-1330.9c28.8-11.5,362.5-19.2,784.4-19.2h738.4l61.4,55.6l63.3,55.6v1637.8V-23.9l-71,211c-113.1,343.3-186,535.1-510.1,1342.5c-168.8,421.9-341.4,876.4-385.5,1012.6c-90.1,278.1-155.3,420-299.2,636.7c-189.9,287.7-515.9,596.4-864.9,820.8c-111.2,72.9-211,111.2-569.6,220.6l-435.3,134.2L6528.5,4573c-128.5,120.8-253.2,230.1-278.1,243.6c-82.5,44.1-356.7,118.9-579.2,157.3C5456.4,5012.2,4840.8,5039.1,4645.2,5018z M5450.7,4605.6c241.6-24.9,404.6-63.3,397-92.1c-5.8-32.6-832.3-1267.7-847.7-1267.7c-15.3,0-841.9,1235.1-847.7,1269.6c-13.4,57.5,592.6,130.4,972.3,115.1C5199.5,4628.7,5345.2,4617.1,5450.7,4605.6z M4255.9,3633.3l456.4-684.7l-375.9-187.9c-207.1-103.6-377.8-186-381.6-182.2c-3.8,3.8-94,351-201.4,772.9l-195.6,767.1l111.2,101.6c59.5,53.7,115.1,99.7,120.8,99.7C3795.6,4319.9,4006.6,4011.1,4255.9,3633.3z M6340.6,4218.3l99.7-103.6l-193.7-765.2c-107.4-420-197.5-767.1-201.4-771c-3.8-3.8-174.5,78.6-381.7,182.2l-375.9,187.9l456.4,684.7c249.3,377.8,464.1,686.6,473.7,686.6C6229.3,4319.9,6283,4273.9,6340.6,4218.3z M3415.9,3084.8c113.1-452.6,220.5-849.6,235.9-884.1c32.6-71,94-105.5,180.3-105.5c34.5,0,272.3,107.4,611.8,278.1l556.2,278.1l556.2-278.1c611.8-304.9,648.2-316.4,747.9-224.4c55.6,47.9,71,101.7,270.4,895.6c115.1,464.1,214.8,853.4,218.6,866.9c3.8,15.3,84.4-1.9,251.2-53.7c134.2-42.2,249.3-78.6,253.2-84.4c3.8-3.8-5.8-118.9-23-253.2c-94-746-86.3-1634,21.1-2249.6c28.8-163,32.6-471.8,38.3-2928.5l5.8-2748.2H5000H2660.3v2709.9c0,1664.7,7.7,2736.7,19.2,2784.7c134.2,558.1,149.6,1528.5,38.4,2406.9c-19.2,153.4-32.6,278.1-30.7,280c24.9,17.3,504.4,151.5,512.1,143.8C3204.9,3913.3,3302.7,3537.4,3415.9,3084.8z M2322.7,3510.6c72.9-402.7,95.9-1480.5,40.3-1925.5c-51.8-420-88.2-544.7-270.4-922.5c-234-485.2-481.4-1039.5-556.2-1248.5l-65.2-178.4v-1131.5v-1129.6l-492.9,3.8l-494.8,5.8l-5.7,1371.2c-3.8,911,1.9,1411.5,15.3,1492.1c34.5,199.5,176.4,598.4,537,1499.7c187.9,469.9,370.1,943.6,402.7,1054.8c134.2,435.3,358.6,759.5,747.9,1081.6c57.5,47.9,111.2,86.3,117,86.3C2305.5,3571.9,2315.1,3543.2,2322.7,3510.6z M7844.1,3458.8c368.2-301.1,590.7-627.1,723-1056.7c32.6-111.2,214.8-584.9,402.7-1054.8c360.5-901.4,502.5-1300.3,537-1499.7c13.4-80.5,19.2-581.1,15.3-1492.1l-5.8-1371.2l-492.9-5.8l-494.8-3.8v1129.6v1131.5l-65.2,178.4c-76.7,211-324.1,767.1-563.8,1261.9c-180.3,375.9-186,398.9-247.4,834.2c-46,343.3-55.6,1329-15.3,1716.4c30.7,303,38.4,345.2,59.4,345.2C7702.2,3571.9,7769.3,3522.1,7844.1,3458.8z'/%3E%3Cpath d='M4046.8,860.2c-136.2-65.2-203.3-166.9-212.9-326c-7.7-147.7,46-262.7,166.8-347.1c71-49.9,97.8-57.5,212.9-57.5c115.1,0,141.9,7.7,214.8,57.5c301.1,212.9,186,678.9-178.4,711.5C4165.8,906.2,4127.4,898.5,4046.8,860.2z'/%3E%3Cpath d='M5811.2,858.2c-61.4-30.7-117-78.6-151.5-128.5c-47.9-69-55.6-95.9-55.6-216.7c0-117,7.7-149.6,51.8-214.8c63.3-95.9,218.6-178.3,329.9-178.3C6323.3,121.8,6494,538,6260,781.5C6131.5,913.9,5976.2,940.7,5811.2,858.2z'/%3E%3Cpath d='M4092.9-685.6c-326-103.6-354.8-577.3-46-721.1c109.3-49.9,186-57.5,283.8-24.9c310.7,105.5,368.2,506.3,99.7,696.2C4342.2-674.1,4194.5-653,4092.9-685.6z'/%3E%3Cpath d='M5872.6-679.8c-74.8-15.3-189.9-113.2-235.9-197.5c-63.3-120.8-53.7-287.7,23-400.8c61.4-86.3,214.8-174.5,306.9-174.5c260.8,0,446.8,228.2,393.1,479.5C6313.7-760.4,6100.8-631.9,5872.6-679.8z'/%3E%3Cpath d='M4050.7-2275.5c-270.4-124.7-301.1-517.8-51.8-675.1c153.4-97.8,327.9-90.1,471.8,23c71,55.6,130.4,195.6,130.4,303C4597.3-2342.6,4305.8-2156.6,4050.7-2275.5z'/%3E%3Cpath d='M5803.6-2283.1c-46-25-109.3-82.5-141.9-126.6c-51.8-72.9-57.5-97.8-57.5-218.6c0-161.1,44.1-245.5,170.7-327.9c301.1-195.6,680.8,92.1,577.2,441.1C6284.9-2285,6014.5-2171.9,5803.6-2283.1z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");

    }

    .feltBoots{
        background-color: rgba(220, 215, 245, 0.7);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cg%3E%3Cg transform='translate(0.000000,511.000000) scale(0.100000,-0.100000)'%3E%3Cpath d='M1545.7,4971.2c-236.6-62.5-403.9-165.1-604.8-366c-205.3-203.1-323.6-401.7-381.6-647.2c-46.9-189.7-40.2-973,8.9-1158.2c125-459.7,508.8-845.8,968.5-975.2l138.4-37.9l6.7-2378.9l6.7-2378.9l51.3-178.5c236.6-814.6,894.9-1428.3,1711.7-1597.9c187.5-40.2,339.2-42.4,2387.9-42.4c2434.7,0,2352.2-4.5,2678,154c462,223.2,794.5,622.6,917.2,1106.9c29,116,37.9,245.5,37.9,502.1c0,406.2-40.2,586.9-191.9,879.3c-116,227.6-401.7,522.2-629.3,656.1c-305.7,178.5-540.1,225.4-1100.2,227.6c-388.3,0-466.4,15.6-555.7,113.8c-89.3,100.4-96,183-96,1388.1v1153.8h-189.7h-191.9l6.7-1220.7l6.7-1222.9l62.5-127.2c80.4-160.7,223.2-310.2,374.9-388.3c118.3-62.5,131.7-62.5,622.6-78.1c379.4-11.2,531.1-24.5,624.9-53.5c424-131.7,732-444.1,836.9-848c46.9-180.8,46.9-778.9,0-957.4c-53.6-203.1-145-368.2-294.6-526.7c-142.8-151.7-270-234.3-491-319.1c-127.2-46.9-151.7-49.1-1495.2-55.8l-1363.5-6.7l-15.6,129.4c-91.5,778.8-381.6,1439.4-888.2,2015.2c-571.3,656.1-1439.4,1106.9-2296.4,1193.9l-151.7,15.6V356.2v1412.6l2439.2,6.7c2294.1,6.7,2443.7,8.9,2559.7,49.1c473.1,156.2,830.2,522.2,952.9,975.2c51.3,185.2,55.8,966.3,8.9,1158.2c-62.5,254.4-171.8,444.1-379.4,647.2c-205.3,205.3-372.7,303.5-615.9,368.2C6828,5022.5,1733.1,5022.5,1545.7,4971.2z M7124.8,4547.2c256.6-122.7,426.3-316.9,499.9-571.3c31.3-107.1,35.7-216.5,29-638.2l-6.7-508.8l-71.4-142.8c-129.4-263.3-357.1-441.9-647.2-502.1c-218.7-46.9-5059.1-46.9-5284.5,0c-283.4,60.3-513.3,238.8-642.7,502.1l-71.4,142.8l-6.7,517.7c-6.7,477.6-4.5,524.4,40.2,656.1c100.4,296.8,303.5,495.4,613.7,593.6c71.4,22.3,642.7,26.8,2744.9,24.6l2655.6-4.5L7124.8,4547.2z M2503.1-1500.6c595.8-120.5,1151.5-415.1,1580-839.1c542.3-535.6,834.6-1153.8,930.6-1954.9l13.4-120.5l-754.3,8.9c-861.4,11.2-912.7,20.1-1289.9,214.2c-156.2,80.4-243.2,145.1-392.8,294.6c-223.2,220.9-343.7,412.9-448.6,714.1l-73.6,212l-6.7,767.7l-6.7,767.7l140.6-15.6C2273.2-1460.4,2411.6-1482.7,2503.1-1500.6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .float{
        background-color: rgba(120, 160, 254, 0.7);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cg%3E%3Cg transform='translate(0.000000,511.000000) scale(0.100000,-0.100000)'%3E%3Cpath d='M8523.4,4130.5l-871.8-874L7420,3496.9c-126.7,133.3-240.4,240.4-251.3,240.4c-10.9,0-426.1-404.2-919.9-898.1l-900.3-898.1l-170.4,56.8c-413,135.5-782.3,181.4-1164.6,144.2c-928.7-91.8-1634.4-541.9-2209.1-1402.8C1153.2-241.8,845.1-1461.1,1028.7-2346c45.9-220.7,142-487.3,227.2-622.8l63.4-104.9l-609.6-609.6L100-4292.9l244.7-244.7l246.9-246.9l603.1,603.1l603.1,603.1l150.8-89.6c327.8-196.7,640.2-284.1,1083.8-301.5c513.5-19.7,970.2,61.2,1494.6,266.6c1018.2,397.7,1872.6,1092.5,2233.1,1813.6c177,358.4,264.4,710.1,279.7,1147.2c15.3,375.8-19.6,627.1-131.1,968l-72.1,222.9l904.6,909l904.6,906.8l-242.5,244.7c-131.1,133.3-240.4,251.3-240.4,260c0,8.7,391.1,408.6,867.5,885l869.6,869.6l-240.4,240.4c-131.1,131.1-244.7,240.4-251.3,240.4S9004.1,4611.2,8523.4,4130.5z M7426.5,2513.6l242.6-242.5l-596.5-596.5l-594.3-594.3l-251.3,251.3l-251.3,251.3l585.6,585.6c321.2,321.2,594.3,585.6,605.3,585.6C7177.4,2753.9,7295.4,2644.7,7426.5,2513.6z M4758.6,1401.4C5383.5,1239.7,5886,826.7,6154.8,254.2c236-502.6,255.7-1077.2,61.2-1621.3c-37.1-100.5-76.5-190.1-87.4-196.7C6111.1-1574.7,3312,1202.5,3312,1230.9c0,35,437,179.2,644.6,212C4153.3,1473.5,4564.1,1451.6,4758.6,1401.4z M4266.9-713.8c784.4-784.4,1426.8-1433.4,1426.8-1444.3c0-35-286.2-264.4-541.9-434.8L4902.8-2759L3530.5-1386.8L2156.1-12.4l59,98.3c100.5,174.8,271,423.9,395.5,574.7l120.2,148.6l54.6-50.3C2816,732.7,3482.5,70.7,4266.9-713.8z M3058.6-1898.1l1177.7-1177.7l-177-56.8c-550.6-172.6-1033.5-203.2-1426.9-87.4c-426.1,124.6-749.5,434.8-887.1,847.8c-54.6,166.1-59,203.2-61.2,570.3c0,299.4,8.7,437,39.3,579c50.3,233.8,126.7,502.6,144.2,502.6C1874.3-720.3,2411.8-1251.3,3058.6-1898.1z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .noFloat{
        background-color: rgba(120, 160, 254, 0.7);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cg%3E%3Cg transform='translate(0.000000,511.000000) scale(0.100000,-0.100000)'%3E%3Cpath d='M8523.4,4130.5l-871.8-874L7420,3496.9c-126.7,133.3-240.4,240.4-251.3,240.4c-10.9,0-426.1-404.2-919.9-898.1l-900.3-898.1l-170.4,56.8c-413,135.5-782.3,181.4-1164.6,144.2c-928.7-91.8-1634.4-541.9-2209.1-1402.8C1153.2-241.8,845.1-1461.1,1028.7-2346c45.9-220.7,142-487.3,227.2-622.8l63.4-104.9l-609.6-609.6L100-4292.9l244.7-244.7l246.9-246.9l603.1,603.1l603.1,603.1l150.8-89.6c327.8-196.7,640.2-284.1,1083.8-301.5c513.5-19.7,970.2,61.2,1494.6,266.6c1018.2,397.7,1872.6,1092.5,2233.1,1813.6c177,358.4,264.4,710.1,279.7,1147.2c15.3,375.8-19.6,627.1-131.1,968l-72.1,222.9l904.6,909l904.6,906.8l-242.5,244.7c-131.1,133.3-240.4,251.3-240.4,260c0,8.7,391.1,408.6,867.5,885l869.6,869.6l-240.4,240.4c-131.1,131.1-244.7,240.4-251.3,240.4S9004.1,4611.2,8523.4,4130.5z M7426.5,2513.6l242.6-242.5l-596.5-596.5l-594.3-594.3l-251.3,251.3l-251.3,251.3l585.6,585.6c321.2,321.2,594.3,585.6,605.3,585.6C7177.4,2753.9,7295.4,2644.7,7426.5,2513.6z M4758.6,1401.4C5383.5,1239.7,5886,826.7,6154.8,254.2c236-502.6,255.7-1077.2,61.2-1621.3c-37.1-100.5-76.5-190.1-87.4-196.7C6111.1-1574.7,3312,1202.5,3312,1230.9c0,35,437,179.2,644.6,212C4153.3,1473.5,4564.1,1451.6,4758.6,1401.4z M4266.9-713.8c784.4-784.4,1426.8-1433.4,1426.8-1444.3c0-35-286.2-264.4-541.9-434.8L4902.8-2759L3530.5-1386.8L2156.1-12.4l59,98.3c100.5,174.8,271,423.9,395.5,574.7l120.2,148.6l54.6-50.3C2816,732.7,3482.5,70.7,4266.9-713.8z M3058.6-1898.1l1177.7-1177.7l-177-56.8c-550.6-172.6-1033.5-203.2-1426.9-87.4c-426.1,124.6-749.5,434.8-887.1,847.8c-54.6,166.1-59,203.2-61.2,570.3c0,299.4,8.7,437,39.3,579c50.3,233.8,126.7,502.6,144.2,502.6C1874.3-720.3,2411.8-1251.3,3058.6-1898.1z'/%3E%3C/g%3E%3C/g%3E%3Cg transform='translate(300.000000,1050.000000) scale(0.700000,-0.700000)'%3E%3Cpath fill='#f00' d='M990,168.5L831.5,10L500,341.6L168.5,10L10,168.5L341.6,500L10,831.5L168.5,990L500,658.4L831.5,990L990,831.5L658.4,500L990,168.5z'/%3E%3C/g%3E%3C/svg%3E");
    }

    .yesFloat{
        background-color: rgba(120, 160, 254, 0.7);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cg%3E%3Cg transform='translate(0.000000,511.000000) scale(0.100000,-0.100000)'%3E%3Cpath d='M8523.4,4130.5l-871.8-874L7420,3496.9c-126.7,133.3-240.4,240.4-251.3,240.4c-10.9,0-426.1-404.2-919.9-898.1l-900.3-898.1l-170.4,56.8c-413,135.5-782.3,181.4-1164.6,144.2c-928.7-91.8-1634.4-541.9-2209.1-1402.8C1153.2-241.8,845.1-1461.1,1028.7-2346c45.9-220.7,142-487.3,227.2-622.8l63.4-104.9l-609.6-609.6L100-4292.9l244.7-244.7l246.9-246.9l603.1,603.1l603.1,603.1l150.8-89.6c327.8-196.7,640.2-284.1,1083.8-301.5c513.5-19.7,970.2,61.2,1494.6,266.6c1018.2,397.7,1872.6,1092.5,2233.1,1813.6c177,358.4,264.4,710.1,279.7,1147.2c15.3,375.8-19.6,627.1-131.1,968l-72.1,222.9l904.6,909l904.6,906.8l-242.5,244.7c-131.1,133.3-240.4,251.3-240.4,260c0,8.7,391.1,408.6,867.5,885l869.6,869.6l-240.4,240.4c-131.1,131.1-244.7,240.4-251.3,240.4S9004.1,4611.2,8523.4,4130.5z M7426.5,2513.6l242.6-242.5l-596.5-596.5l-594.3-594.3l-251.3,251.3l-251.3,251.3l585.6,585.6c321.2,321.2,594.3,585.6,605.3,585.6C7177.4,2753.9,7295.4,2644.7,7426.5,2513.6z M4758.6,1401.4C5383.5,1239.7,5886,826.7,6154.8,254.2c236-502.6,255.7-1077.2,61.2-1621.3c-37.1-100.5-76.5-190.1-87.4-196.7C6111.1-1574.7,3312,1202.5,3312,1230.9c0,35,437,179.2,644.6,212C4153.3,1473.5,4564.1,1451.6,4758.6,1401.4z M4266.9-713.8c784.4-784.4,1426.8-1433.4,1426.8-1444.3c0-35-286.2-264.4-541.9-434.8L4902.8-2759L3530.5-1386.8L2156.1-12.4l59,98.3c100.5,174.8,271,423.9,395.5,574.7l120.2,148.6l54.6-50.3C2816,732.7,3482.5,70.7,4266.9-713.8z M3058.6-1898.1l1177.7-1177.7l-177-56.8c-550.6-172.6-1033.5-203.2-1426.9-87.4c-426.1,124.6-749.5,434.8-887.1,847.8c-54.6,166.1-59,203.2-61.2,570.3c0,299.4,8.7,437,39.3,579c50.3,233.8,126.7,502.6,144.2,502.6C1874.3-720.3,2411.8-1251.3,3058.6-1898.1z'/%3E%3C/g%3E%3C/g%3E%3Cg transform='translate(400.000000,300.000000) scale(0.700000,0.700000)' %3E%3Cpath fill='#0f0' d='M380.6,990c-30.5,0-59.3-14.2-77.8-38.7L52.6,620.8c-32.6-42.9-24.1-104,18.9-136.6c43.1-32.7,104.2-24.1,136.7,18.9l164.6,217.3L786.7,55.9c28.5-45.6,88.7-59.6,134.5-31.2c45.7,28.4,59.8,88.6,31.2,134.4L463.4,943.9c-16.9,27.4-46.3,44.5-78.4,45.9C383.5,990,382.1,990,380.6,990L380.6,990z'/%3E%3C/g%3E%3C/svg%3E");
    }

    .question{
        background-color: rgba(120, 160, 254, 0.7);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cg%3E%3Cpath fill='#94b' d='M410.5,726.6c0-121.6,5.5-168.1,97.3-231.9c50-34.8,80.1-56.6,80.1-108.5c0-98.9-45.2-117-99.5-117c-72.4,0-108.7,48.3-113.7,94.9v1.3H132.4C132.4,145.2,361.8,10,502.6,10c154.5,0,365,80.6,365,329c0,102.5-22.4,180.3-121.9,249.9c-55.5,39.2-78.8,46.4-78.8,137.7H410.5z M671.3,990H413.9V811.4h257.4V990z'/%3E%3C/g%3E%3C/svg%3E");
    }

    .exclamation{
        background-color: rgba(240, 245, 180, 0.8);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        background-image: url("data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cg%3E%3Cpath d='M633.6,789.5v155.9c0,12.1-4.4,22.5-13.2,31.3c-8.8,8.8-19.3,13.2-31.3,13.2H410.9c-12.1,0-22.5-4.4-31.3-13.2c-8.8-8.8-13.2-19.3-13.2-31.3V789.5c0-12.1,4.4-22.5,13.2-31.3c8.8-8.8,19.3-13.2,31.3-13.2h178.2c12.1,0,22.5,4.4,31.3,13.2C629.2,767,633.6,777.5,633.6,789.5z M654.5,54.5L635,589.1c-0.5,12.1-5.2,22.5-14.3,31.3c-9,8.8-19.6,13.2-31.7,13.2H410.9c-12.1,0-22.6-4.4-31.7-13.2c-9-8.8-13.8-19.3-14.3-31.3L345.5,54.5c-0.5-12.1,3.6-22.5,12.2-31.3s18.9-13.2,31-13.2h222.7c12.1,0,22.4,4.4,31,13.2C650.9,32,655,42.5,654.5,54.5z'/%3E%3C/g%3E%3C/svg%3E");
    }

</style>
</head>
<body class="wavesBackGround" onload="setTimeout(periodsHandler(), 1000)">
<header class="head">
    <div class="inlineTop left" style="margin-right: 1em;">
        <h1 style="color:#172;">Метео</h1>

        <h2 style="color:#2a6; ">Двориковская СОШ</h2>
    </div>
    <form name="checkDuration" onclick="">
        <div class="inlineTop teal">
            <button class="bordered" type="button" onclick="showAllSensors()">Показать последние</button>
            <div class="big bordered" style="margin: 0.3em auto">
                <div class="big center">Выбрать интервал</div>
                <div style="margin: 0.1em 0.6em 0.2em 0.3em">
                    &nbsp;C: &nbsp;<input class="big" type="date" name="start" min="2018-09-28">
                    &nbsp;По: &nbsp;<input class="big" type="date" name="stop" min="2018-09-28">
                </div>
            </div>
        </div>
        <div class="inlineTop">
            <div style="padding: 0.4em; margin:0.6em 0em 0.6em 1em;"><span class="large">&nbsp;Показать:</span><br>
                <select name="sensors" class="bordered" onclick="sensorsHandler()">
                    <option value="tOut" selected="">Температура на улице</option>
                    <option value="tIn">Температура школа</option>
                    <option value="baro">Давление</option>
                    <option value="humid">Влажность</option>
                </select>
                <br>
                <select name="periods" class="bordered" onclick="periodsHandler()">
                    <option value="cur">Текущие значения</option>
                    <option value="min">2 часа</option>
                    <option value="hour">Сутки</option>
                    <option value="day">Период</option>
                </select>
            </div>
        </div>
    </form>
</header>
<div id="errorConsole" class="red large"></div>
<div id="owner" class="center brown inlineCenter"></div>
<div id="rightPanel"></div>




<!--   handlers -->
<script>

var rightPanel = document.getElementById('rightPanel');
rightPanel.style.margin = '0.6em auto';
rightPanel.style.paddingTop = '1em';
rightPanel.style.border = '1px solid #763';
rightPanel.style.borderRadius = '0.2em';
var owner = document.getElementById('owner');
owner.style.paddingTop = '1em';
owner.style.margin = '0.6em auto';
var height = 0.94 * getFreeHeight() + 'px';

//  check tools
var form = document.forms[0];
var sensors = form.elements.sensors;
var periods = document.getElementsByName("periods")[0];

// watch last values
var isWatch = false;
var watchTimer = null;
var sensor;

//  draw chart
var plotter;

function getFreeHeight() {
    return  document.documentElement.clientHeight - document.getElementsByTagName("header")[0].scrollHeight;
}

/**
 *
 * called on click on sensors select tag
 * @param checkedOption
 */
function sensorsHandler() {
    if (debug)console.log("click on sensors select");
    periodsHandler();
}

/**
 * compute want action and call appropriate handler
 * @param num ( number of the checked option)
 */
function periodsHandler() {
    owner.style.visibility = 'hidden';
    rightPanel.style.visibility = 'hidden';
    document.getElementById('errorConsole').innerHTML = '';
    if (watchTimer != null) {
        clearInterval(watchTimer);
        watchTimer = null;
    }
    sensor = null;
    owner.innerHTML = '';
    // get name of checked sensors
    var name = sensors.options[sensors.selectedIndex].value;
    var check;
    var current;
    // handle checked period
    switch (periods.selectedIndex) {
        case 0:
            check = "show CURRENT";
            current = getParam(name, currentChannel, 1, false);
            showCurrentValue(current);
            watchTimer = setInterval(function () {
                updateValue(current)
            }, 300000);
                return;
            break;
        case 1:
            check = "last HOUR";
            current = getParam(name, currentChannel, 26, false);
            break;
        case 2:
            check = "last DAY";
            current = getParam(name, byTimeChannel, 28, false);
            break;
        case 3:
            check = "check PERIOD";
            var res = handlePeriod();
                if(res == -1){
                    return;
                }
                current = getParam(name, byTimeChannel, res.period, res.isOnlyDays);
            break;
    }
    if (debug)console.log(current);
    show(current);

}

//
// =================== On show current values ==================
//

/**
 *  create measurer  and show value
 * @param param
 */
function showCurrentValue(param) {
    if (debug)console.log('try set view for ' + param.name);
    // measure panel
    owner.style.height = height;
    owner.style.width = height;
    //owner.style.paddingRight = 0.09*parseInt(height) + 'px';
    //  pictures panel
    rightPanel.style.height = parseInt(height) - 2 + 'px';
    rightPanel.style.width = 0.9 * (document.documentElement.scrollWidth - getFreeHeight()) + 'px';
    rightPanel.innerHTML = '';
    rightPanel.setAttribute('class', 'right inlineCenter mix' )
    rightPanel.style.visibility = 'visible';
    owner.style.visibility = 'visible';
    sensor = getSensor(owner, param.name) ;
    updateValue(param);
}

/**
 * update wiev on expire wait time for sensor value
 * @param param
 */
function updateValue(param) {
    if (debug)console.log("url: '" + param.url + "'");
    try {
        get(param.url, function (data) {
            data = JSON.parse(data);
            var gotten = data["feeds"][0][param.field];
            if (debug)console.log("i get  :" + gotten + " !");
            sensor.brightness(getSensorColor(gotten, param.name));
            sensor.setValue(gotten);

        });
    } catch (e) {
        showError(e.toString());
    }
}

//
// ================== On check period =====================================
//

/**
 * action on select user`s show of period
 * verify given period
 * @return -1 if fail check if success - object witch given data
 *
 */
function handlePeriod() {
    var first = form.elements.start.value;
    var second = form.elements.stop.value;
    if (!first || !second) {
        showError('Для периода не установлен интервал.<br>Надо установить даты!!!');
        return -1;
    }
    if (second >= first) {
        var fromDay = first.substr(8, 2);
        var toDay = second.substr(8, 2);
        var sub = toDay - fromDay;
        if (isNaN(sub)) {
            showError('Не могу получить дату !!!!');
            return -1;
        }
        if (sub < 0) {
            sub = sub + monthLen[parseInt(first.substr(5,2))];
        }
        if (debug)console.log("On check period  monthNumber = " + first.substr(5,2) +  "  day count = " + sub);
        return {
            period:{ 'first': first, 'second' : second},
            isOnlyDays : (sub > 6)
        }
    } else {
        showError(' &nbsp; &nbsp; Неправильно выбран период: <br>начальная дата оказалась раньше конечной !');
        return -1;
    }

}

/**
 *
 *
 *
 */
function show(param) {
    if (debug)console.log("showPeriod_URL: " + param.url);
    var isDays = (param.name.indexOf('D') > 0);
    try {
        get(param.url, function (data) {
            var times = [], values = [];
            data = JSON.parse(data);
            var max = data["feeds"].length;
            var j = 0, cur;
            //  exclude null values
            for (var i = 0; i < max; i++) {
                cur = parseInt(data["feeds"][i][param.field]);
                if (isNaN(cur))continue;
                else values[j] = cur;
                times[j] =isDays ?  data["feeds"][i]["created_at"].substr(8, 2) + '/' +
                        data["feeds"][i]["created_at"].substr(5, 2): data["feeds"][i]["created_at"].substr(11, 5);
                j++;
            }
            // for  big arrays reduce it
            var divider = (j < 40) ? 1 : parseInt((j + 'a').substr(0, (j + 'a').length - 2));
            if(debug)console.log('divider = ' + divider);
            if (divider > 1) {
                var v = [], t = [];
                var n = 0;
                var isEnd = false;
                var i;
                for (i = 0; i < j; i++) {
                    if (i % divider != 0)continue;
                    v[n] = values[i];
                    t[n] = times[i];
                    n++;
                }
                if (t[n] != times[j]) {
                    v[n] = values[j];
                    t[n] = times[j];
                }
                values = v;
                times = t;
            }
            if (debug) {
                console.log('Arrays len [ get=' + max + '  notNull=' + j + '  onDraw=' + values.length + ' ]');
                console.log("i get  :\n___ " + values.toString() + " !\n___ " + times.toString() + " !");
            }
            var nameTail = '';
            var from = data["feeds"][0]['created_at'].substr(0, 10);
            var to = data["feeds"][max - 1]['created_at'].substr(0, 10);
            if(from != to){
            nameTail += '  ( &nbsp; c: ' +
                    from.substr(8, 2) + '-' + monthName[parseInt(from.substr(5, 2))] +
                    '&nbsp;' + from.substr(2, 2) + ' &nbsp; по: ' +
                    to.substr(8, 2) + '-' + monthName[parseInt(to.substr(5, 2))] +
                    '&nbsp;' + to.substr(2, 2) + '&nbsp; )';
            }
            param.chartName += nameTail;
            if(!isDays) times = shiftTime(times, (param.channelId == byTimeChannel.id));
            if((param.channelId != currentChannel.id)){
            }

            drawChart(times, values, param);
        });
    } catch (e) {
        owner.innerHTML = '';
        showError('Ошибка при получении данных:' + e.toString() +
                '<br> Попробуйте ещё раз.');
        console.log(e.toString());
    }
}


/**
 *  draw chart by given values
 * @param times - labels on x axis for any value
 * @param values - chart data values
 * @param chartName
 * @param axisLabels - axis header names { x: "x axis label" , y : "y axis label" }
 */
function drawChart(times, values, param) {
    owner.style.height = height;
    owner.style.paddingRight = '0em';
    owner.style.width = '100%';
    owner.style.visibility = 'visible';
    var min = values[0], max = values[0];
    for (var i = 0; i < values.length; i++) {
        if (values[i] > max) max = values[i];
        if (values[i] < min) min = values[i];
    }
    max = Math.round(max * 1 + 2);
    min = Math.round(min * 1 - 2);
    if (debug)console.log("draw chart [ min = " + min + ", max = " + max + " ]");
    var chartSurface = new Plotter(
            owner,
            0.96*document.getElementsByTagName('header')[0].scrollWidth,
            0.92 * getFreeHeight());
    chartSurface.setAxisLabels(param.labels.x, param.labels.y);
    chartSurface.chartColor(param.chartColor);
    chartSurface.create(param.chartName, { 'values': values, xAxisLabels: times}, { 'min': min, 'max': max});
}
</script>


<!--  tune views -->
<script>

    /**
     *
     * @param times - arrays of date-time values as hour-min or date-time
     * @param formatType - "hh-mm" for hour-minute "full" for date-time
     *
     */
    function shiftTime(times, hasHoursOnly) {
        var shift = 27;
        for (var i in times) {
            var first = parseInt(times[i]);
            first = (first + shift) % 24;
            if(hasHoursOnly)first = (first + 25)%24;
            var tail = (hasHoursOnly)? 'ч.' : times[i].substr(2);
            times[i] = "" + first + tail;
        }
        return times;
    }

    /**
     *
     * @param color color as name( may be red , green, yellow, blue)
     * @returns {string} color as HTML color [ #rrggbb or rgba( r, g, b, alpha) ]
     */
    function getColor(color) {
        switch (color) {
            case 'red' :
                return '#faf';
            case 'green':
                return '#5a5';
            case 'blue' :
                return '#12e';
            case 'yellow' :
                return '#ffb'
        }
    }

    /**
     * return color appropriate gotten value for current sensor
     * @param gotten - current value
     * @param sensorName
     * @returns {string} color as HTML color
     */
    function getSensorColor(gotten, sensorName) {
        var color;
        var panel = document.getElementById('rightPanel');
        var head = 'right inlineCenter ';
        switch (sensorName) {
            case 'tIn':
                if (gotten < 10) {
                    panel.setAttribute('class',head + 'cool');
                    return getColor('blue');
                }
                if (gotten > 30){
                    panel.setAttribute('class', head + 'hot');
                    return getColor('red');
                }
                if (gotten > 23 || gotten < 15){
                    panel.setAttribute('class', head + 'exclamation');
                    return getColor('yellow');
                }
                panel.setAttribute('class',head +  'coat');
                return getColor('green');
            case 'tOut':
                    if(gotten < -15){
                        panel.setAttribute('class', head + 'feltBoots');
                        return getColor('blue');
                    }
                if (gotten < -10){
                    panel.setAttribute('class', head + 'cool');
                    return getColor('blue');
                }
                if (gotten > 35){
                    panel.setAttribute('class', head + 'hot');
                    return getColor('red');
                }
                if (gotten < 10 || gotten > 25){
                    panel.setAttribute('class', head + 'exclamation');
                    return getColor('yellow');
                }
                panel.setAttribute('class', head + 'coat');
                return getColor('green');
            case 'humid':
                if (gotten > 80){
                    panel.setAttribute('class', head + 'wet');
                    return getColor('blue');
                }
                if (gotten < 25){
                    panel.setAttribute('class', head + 'noWet');
                    return getColor('red');
                }
                if (gotten < 45 || gotten > 70){
                    panel.setAttribute('class', head + 'exclamation');
                    return getColor('yellow');
                }
                panel.setAttribute('class', head + 'yesWet');
                return getColor('green');
            case 'baro' :
                    addFishForecast(sensorName, panel, head);
                if (gotten < 700)return getColor('yellow');
                return getColor('green');
        }
    }

    function addFishForecast( name, panel, headClasses){
        var url = getUrl(currentChannel.id, currentChannel[name], 60);
        get(url, function(data){
            var values = [];
            data = JSON.parse(data);
            var max = data["feeds"].length;
            var j = 0, cur;
            //  exclude null values
            for (var i = 0; i < max; i++) {
                cur = parseInt(data["feeds"][i]['field' + currentChannel[name]]);
                if (isNaN(cur))continue;
                else values[j] = cur;
                j++;
            }
            j--;
            var first = 0, second= 0;
            var half = parseInt((j-1)/2);
            for( var i = 0; i < half; i++){
                first += values[i];
                second += values[j-i];
            }
            if(debug)console.log("Fish fore: [first=" + first + " second=" + second + " tail=" + values[j] + " beforetail=" + values[j-1]);
            if((values[j] < values[j-1] &&
                    values[j-1] < values[j-2] ) ||
                    (first - second > 20 && (values[j-1] - values[j] > 0 ))){
                panel.setAttribute('class', headClasses + 'noFloat');
            }else if((values[j] > values[j-1] &&
                        values[j-1] > values[j-2] )  ||
                        (second - first > 20 && (values[j] - values[j - 1] > -1))){
                    panel.setAttribute('class', headClasses + 'yesFloat');
            }else if ( first - second < 10 && values[j] - values[j-1] > -1){
                panel.setAttribute('class', headClasses + 'float');
            }else{
                panel.setAttribute('class', headClasses + 'question');
            }
        });
    }


</script>

<!--   measurers create -->
<script>

    function getSensor(owner, sensorName) {
        if(debug)console.log('get measurer for ' + sensorName);
        var measurer;
        var height = getFreeHeight();
        switch (sensorName) {
            case 'tIn':
                measurer = get_tIn(owner, height);
                break;
            case 'tOut':
                measurer = get_tOut(owner, height);
                break;
            case 'baro':
                measurer = getBaro(owner, height);
                break;
            case 'humid':
                measurer = getHumid(owner, height);
                break;
        }
        if (debug) console.log("measurer : " + measurer);
        return measurer;
    }
    /**
     *  create panel with thermometers, barometer and hyhrometer
     */

    /*  Indoor thermometer  */
    function get_tIn(owner, height) {
        owner.clientWidth = height / 3;
        var tInBounds = {
            minValue: 0,
            maxValue: 40,
            scaleDeviceCount: 20
        }
        tIn = new Measurer(owner,
                {
                    colors: {
                        fill: '#fff',
                        devBordStartCol: 'rgba(240, 200,240, 0.2)',
                        devBordStopCol: 'rgb(254,254,254, 1)'
                    },
                    bounds: tInBounds,
                    rect: {
                        label: "t℃ школа",
                        height: 0.9 * height,
                        width: height / 3,
                        hasRoundRect: false
                    }
                });
        return tIn;
    }

    /* outDooor thermometer */
    function get_tOut(owner, height) {
        owner.clientWidth = height / 3;
        var tOutBounds = {
            minValue: -50,
            maxValue: 50,
            scaleDeviceCount: 30
        }
        tOut = new Measurer(owner,
                {
                    colors: {
                        fill: '#fff',
                        devBordStartCol: 'rgba(5,225,254,0.15)'
                    },
                    bounds: tOutBounds,
                    rect: {
                        label: "внеш. t℃",
                        height: 0.9 * height,
                        width: height / 3
                    }
                });
        return tOut;
    }

    /* barometer   */
    function getBaro(owner) {
        owner.width = getFreeHeight();
        baro = new Measurer(owner,
                {
                    bounds: {
                        minValue: 650,
                        maxValue: 810,
                        scaleDivideCount: 16
                    },
                    oval: {
                        label: "&nbsp;мм.рт.ст ",
                        startAngle: -35,
                        stopAngle: 215,
                        hasRound: false,
                        width: 0.85 * getFreeHeight()
                    },
                    colors: {
                        devBordStartCol: 'rgba(130, 180, 200, 0.85)',
                        devBordStopCol: 'rgba(220, 230,250, 0.55)'
                    }
                });
        return baro;
    }

    /* hygrometer */
    function getHumid(owner) {
        owner.width = getFreeHeight();
        humid = new Measurer(owner,
                {
                    bounds: {
                        minValue: 0,
                        maxValue: 100,
                        scaleDeviceCount: 10
                    },
                    oval: {
                        startAngle: -10,
                        stopAngle: 190,
                        label: "&nbsp;%",
                        hasRound: false,
                        width: 0.85 * getFreeHeight()
                    },
                    colors: {
                        devBordStopCol: 'rgba(50,200,120,0.35)'
                    }
                });

        return  humid;
    }

</script>


<!-- Measurer JS function  -->
<script>

/**
 *   minify variant of measurer
 * @param t - HTML element - measurer owner( block type )
 * @param a - object with start parameters
 * @returns { object with methods setValue, showValue, brightness, getBrightness }
 * @constructor
 */
function Measurer(t, a) {
    "use strict";
    var e = navigator.userAgent.toLowerCase(), D = !(e.search("firefox") < 0);
    D && 58.9 < e.substring(e.length - 4) && (D = !1);
    var c, o = {strokeCol: "#744", devBordStartCol: "#eef", devBordStopCol: "#851", fill: "#ffe", textCol: "#332", brightnessCol: "#fff", devBorderCol: "#530", labelCol: "#322", scaleCol: "red", scaleBordCol: "#132", arrStrokeCol: "#010", arrFillCol: "#864"}, i = {minValue: 0, maxValue: 100, scaleDivideCount: 10}, r = {height: Math.round(.36 * l()), width: Math.round(.12 * l()), curValue: 0, strokeWidth: 1, hasScaleLabels: !0, hasLabel: !0, hasEdgeCircle: !0, hasGlass: !0, hasRoundRect: !0, label: "", hasFlip: !1}, n = {label: "", alpha: 0, startAngle: 0, stopAngle: 180, width: Math.round(l() / 4.1), strokeWidth: 1, hasRound: !0, hasFlip: !1};

    function l() {
        return Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight)
    }

    var s = (Math.random() * (new Date).getSeconds() + "").substring(0, 6), f = document.createElement("div"), w = document.createElement("div");
    w.appendChild(f), w.setAttribute("class", "bigSize");
    var d, g = document.getElementsByTagName("body")[0];
    var h = {};
    if (a) {
        if (null == t || !(t instanceof HTMLElement))return console.log(" new created device has no owner container(tag) i get - " + t), void(d = null);
        d = null, function () {
            var t;
            for (var e in a.hasOwnProperty("bounds") && (t = a.bounds), i)t && t.hasOwnProperty(e) ? h[e] = t[e] : h[e] = i[e]
        }(), function () {
            var t;
            for (var e in a.hasOwnProperty("colors") && (t = a.colors), o)t && t.hasOwnProperty(e) ? h[e] = t[e] : h[e] = o[e]
        }(), h.owner = t, a.hasOwnProperty("rect") && (!function () {
            var t = a.rect;
            for (var e in r)t && t.hasOwnProperty(e) ? h[e] = t[e] : h[e] = r[e];
            t && t.hasOwnProperty("fontSize") && (r.fontSize = t.fontSize), t && t.hasOwnProperty("scaleWidth") && (r.scaleWidth = t.scaleWidth)
        }(), d = function (y) {
            var o, b, W, M, B, S, V, A, R = !1, E = 0, P = null, D = null, I = null, L = null, i = 0, r = !1;

            function t(t) {
                if (null == L)return!1;
                if (t > y.maxValue || t < y.minValue)return console.log("WARNING linearDevice get wrong current value " + t), l(i = "ERR"), !1;
                i = t;
                var e = (t -= y.minValue) * W / Math.abs(y.minValue - y.maxValue), o = "" + (B - e);
                return L.setAttribute("y", o), L.setAttribute("height", "" + e), r && l(i), !0
            }

            function e(t) {
                l((r = t) ? i : "?")
            }

            function n(t) {
                b = y.hasOwnProperty("scaleWidth") ? Math.round(y.scaleWidth * y.width / 100) : Math.round(y.width / 10), B = Math.round(.87 * y.height), S = Math.round(.12 * y.height), M = (W = B - S) / y.scaleDivideCount, A = y.height / 40, y.strokeWidth = Math.round(y.height / 200), A < 2 && (A = 2), V = Math.round(y.width / 2 - A), E = W / y.scaleDivideCount - 4 * y.strokeWidth, t && E < 8 && (E = 8)
            }

            function l(t) {
                return null != I && (I.textContent = "" + t, !0)
            }

            var a, s, d = !1;

            function O() {
                d ? d && (w.parentNode.removeChild(w), f.innerHTML = "", y.height = a, y.width = s, E = c, n(!0), h(y.owner), t(i), d = !1) : d || (g.appendChild(w), c = E, a = y.height, s = y.width, y.height = Math.round(.85 * screen.height), y.width = Math.round(s * y.height / a), n(!0), f.setAttribute("style", "height:" + y.height + "px;padding-top:" + 3 * y.height / 34 + "px;"), h(f), t(i), d = !0)
            }

            function z() {
                e(!r)
            }

            function h(t) {
                var e, o, i;
                R ? (i = y.width, o = y.height, e = " transform='rotate(90) translate(0, -" + y.height + ")' >") : (i = y.height, o = y.width, e = " >"), t.innerHTML = "<svg width='" + o + "' height='" + i + "' viewBox='0,0 " + o + " " + i + "' xmlns='http://www.w3.org/2000/svg'></svg>", P = t.getElementsByTagName("svg")[0];
                var r, n, l, a, s, d, h, u, c, f, w, g, v, p, x, m, k, C = "<g id='" + y.id + "group' " + e;
                return C += function () {
                    y.gradId = y.brightnessId + "Rgrad";
                    var t = "<defs> <radialGradient id='" + y.gradId + "' cx='50%' cy='50%' > ";
                    return t += " <stop offset='25%' stop-color='" + y.devBordStartCol + "' opacity='0.5' />", t += " <stop offset='75%' stop-color='" + y.devBordStartCol + "'/>", t += "  <stop offset='99%' stop-color='" + y.devBordStopCol + "'  />", t += "</radialGradient>"
                }(), C += "<linearGradient  id='" + y.id + "scale' x1='0' y1='0' x2='100%' y2='0' ><stop offset='0%' stop-color='black' stop-opacity='0.5' /><stop offset='37%' stop-color='#fff' stop-opacity='0.2' /><stop offset='45%' stop-color='#fff' stop-opacity='0.4' /><stop offset='55%' stop-color='#fff' stop-opacity='0.2' /><stop offset='100%' stop-color='black' stop-opacity='0.6' /></linearGradient></defs> ", C += (x = y.strokeWidth, m = y.height - y.strokeWidth, k = "", y.hasRoundRect && (k = " rx='" + 2 * A + "' ry='" + 2 * A + "' "), "<rect name='housing' x='" + x + "' y='" + x + "'  width='" + (y.width - 2 * y.strokeWidth) + "' height='" + (y.height - 2 * y.strokeWidth) + "' " + k + " stroke='" + y.devBorderCol + "' stroke-width='" + 1.3 * y.strokeWidth + "' fill='" + y.devBordStartCol + "' /><line x1='" + 2 * A + "' y1='" + x + "' x2='" + (y.width - 2 * A) + "' y2='" + x + "' stroke='" + y.devBorderCol + "' stroke-width='" + y.strokeWidth + "' /><line x1='" + 2 * A + "' y1='" + m + "' x2='" + (y.width - 2 * A) + "' y2='" + m + "' stroke='" + y.devBorderCol + "' stroke-width='" + y.strokeWidth + "' />"), C += (r = "<rect ", r += " name='brightness' x='" + (V - E) + "' y='" + (S - E / 2) + "'  width='" + 2 * E + "' height='" + (W + E) + "'  rx='" + E / 2 + "' ry='" + E / 3 + "' opacity='0.95' fill='" + y.brightnessCol + "' />"), y.hasLabel && (C += (g = " ", v = 1.2 * A, p = (w = W / 10 - A / 2) + A / 2, R && (g = " transform='rotate(-90 " + p + " " + p + ") translate( -" + W + " , -" + 2 * y.strokeWidth + ")' "), "<text name='housing'  x='" + v + "' y='" + p + "' fill='" + y.labelCol + "' " + g + " font-size='" + w + "' >" + y.label + "</text>")), C += (n = "<rect ", n += " x='" + (V - b / 2) + "' y='" + (S - y.strokeWidth / 2) + "'  width='" + b + "' height='" + (W + y.strokeWidth) + "'  stroke='" + y.scaleBordCol + "' stroke-width='" + y.strokeWidth + "'  fill='none' /> "), y.hasEdgeCircle && (C += (f = "<circle r='" + (u = .9 * b) + "' cx='" + V + "' cy='" + (c = B + u) + "'  stroke='" + y.scaleBordCol + "' stroke-width='" + y.strokeWidth + "'  fill='" + y.scaleCol + "' />", y.hasGlass && (f += "<circle r='" + (u - y.strokeWidth / 2) + "' cx='" + V + "' cy='" + c + "'   fill='url(#" + y.id + "scale)' />"), f += "<rect  x='" + (V - b / 2 + y.strokeWidth / 2) + "' y='" + B + "'  width='" + (b - y.strokeWidth) + "' height='" + 1.3 * y.strokeWidth + "'  fill='" + y.scaleCol + "' /> ")), C += function () {
                    for (var t, e = V + b / 2 + y.strokeWidth, o = V + b / 2 + y.width / 7, i = "", r = 2 * y.scaleDivideCount + 1, n = M / 2, l = 0; l < r; l++)i += " <line x1='" + e + "' y1='" + (t = S + l * n) + "'' x2='" + (o - l % 2 * E / 3) + "' y2='" + t + "' stroke='" + y.strokeCol + "' stroke-width='" + y.strokeWidth + "' /> ";
                    return i
                }(), y.hasScaleLabels && (C += function () {
                    var t, e = 0, o = V + b / 2 + y.width / 7 + .8 * E;
                    if (E < 10)return"<text x='" + (t = o) + "' y='" + (B + 7) + "' font-size='14' fill='" + y.strokeCol + "' >" + y.minValue + "</text> <text x='" + t + "' y='" + (S + 4) + "' font-size='14' fill='" + y.strokeCol + "' >" + y.maxValue + "</text> ";
                    for (var i = B + y.strokeWidth / 2, r = (y.maxValue - y.minValue) / y.scaleDivideCount, n = "' fill='" + y.textCol + "' font-style='plain'  text-anchor='middle'", l = "", a = 0; a < y.scaleDivideCount + 1; a++) {
                        var s = Math.round(10 * (y.minValue + r * a)) / 10;
                        l += "<text name='housing'  x='" + o + "' y='" + (e = i - a * M) + "' " + n, R && (l += " transform='rotate(-90 " + o + " " + e + ")' "), l += 0 == s ? " font-weight='bold' font-size='" + (E + 2 * y.strokeWidth) + "' >" : " font-size='" + E + "' >", l += s + "</text>"
                    }
                    return l
                }()), C += "<rect name='scale'  x='" + (V - b / 2 + y.strokeWidth / 2) + "' y='" + (B - y.strokeWidth) + "'  width='" + (b - y.strokeWidth) + "' height='0' fill='" + y.scaleCol + "' />", y.hasGlass && (C += (h = V - b / 2, d = y.hasRound ? W + 2.3 * y.strokeWidth : W + 1.5 * y.strokeWidth, "<rect x='" + h + "' y='" + S + "' width='" + b + "' height='" + d + "' fill='url(#" + y.id + "scale)' />")), C += (l = W / 10 - A / 2, a = y.height - l - A / 2 - 2 * y.strokeWidth, s = "<rect x='" + (3 * y.width / 4 - 1.2 * l) + "' y='" + a + "'  width='" + 2.15 * l + "' height='" + l + "'  fill='" + y.devBordStartCol + "'  stroke='" + y.strokeCol + "'  stroke-width='" + y.strokeWidth + "' opacity='1' /><text  name='text'' x='" + (3 * y.width / 4 - y.strokeWidth) + "' y='" + (y.height - A - y.strokeWidth) + "' text-anchor='middle' fill='" + y.textCol + "' font-size='" + l + "' >?</text>", s += "<rect name='valuesPane' x='" + (3 * y.width / 4 - 1.1 * l) + "' y='" + (a + y.strokeWidth) + "'  width='" + 2 * l + "' height='" + (l - 2 * y.strokeWidth) + "'  fill='" + y.devBordStartCol + "' opacity='0.1' />"), P.innerHTML = C + "</g>", function () {
                    for (var t, e = P.childNodes[0], o = "", i = 0; i < e.childNodes.length; i++) {
                        t = e.childNodes[i];
                        try {
                            t instanceof Text || !t.hasAttribute("name") || ("scale" == (o = t.getAttribute("name")) && (L = t), "brightness" == o && (y.hasFlip && t.addEventListener("click", O), D = t), "text" == o && (I = t), "valuesPane" == o && t.addEventListener("click", z), "housing" == o && y.hasFlip && t.addEventListener("click", O))
                        } catch (t) {
                        }
                    }
                }(), !0
            }

            var u = !1;
            return function () {
                var t;
                if (o = y.brightnessCol, y.width % 5 != 0) {
                    for (t = Math.round(y.width); t % 6 != 0;)t++;
                    y.width = t
                }
                if (!function () {
                    var t = !0;
                    if (y.hasOwnProperty("scaleWidth")) {
                        var e = y.scaleWidth;
                        (e != e || 91 < Math.abs(e - 100)) && (t = !1)
                    }
                    if (y.hasOwnProperty("fontSize") && (E != E || E < 8 || 100 < E))return!1;
                    if ((y.height != y.height || y.height < 10 || y.width != y.width || y.width < 10 || y.strokeWidth != y.strokeWidth || y.strokeWidth < 1 || y.maxValue != y.maxValue || y.minValue != y.minValue || y.scaleDivideCount != y.scaleDivideCount || y.scaleDivideCount < 1) && (t = !1), !t)throw console.log("ERROR : wrong start parameter"), new Error("Illegal value og parameter");
                    return t
                }())throw u = !0, new Error("init param wrong");
                if (y.height <= y.width) {
                    var e = y.width;
                    y.width = y.height, y.height = e, R = !0
                }
                n(!1), h(y.owner), u = !1
            }(), u ? null : {setValue: t, brightness: function (t) {
                return null != D && (D.setAttribute("fill", t), y.brightnessCol = t, !0)
            }, getBrightness: o, showValue: e}
        }(h)), a.hasOwnProperty("oval") && (!function () {
            var t = a.oval;
            for (var e in n)t.hasOwnProperty(e) ? h[e] = t[e] : h[e] = n[e];
            t.hasOwnProperty("fontSize") && (n.fontSize = t.fontSize), t.hasOwnProperty("hasRound") && 0 == t.hasRound && (h.width = Math.round(h.width + h.width / 10))
        }(), d = function (k) {
            var t, C, y = 40, b = null, W = null, M = null, B = void 0, o = !1, i = 0, S = !1, V = 0;

            function e(t) {
                r((S = t) ? V : "?")
            }

            function r(t) {
                return null != M && (M.textContent = t, !0)
            }

            function A() {
                o ? o && (w.parentNode.removeChild(w), f.innerHTML = "", k.width = i, C = c, n(k.owner), o = !1) : function () {
                    if (!o) {
                        g.appendChild(w), c = C, i = k.width;
                        var t = screen.height - screen.height / 8, e = document.body.clientWidth;
                        k.width = t < e ? Math.round(.85 * t) : Math.round(.85 * e), C = C * k.width / i, B.innerHTML = "<svg  width='" + k.width + "' height='" + k.width + "' viewBox='0,0 " + k.width + " " + k.width + "' xmlns='http://www.w3.org/2000/svg'></svg>", f.setAttribute("style", "padding-top:" + (t - k.width) / 2 + "px; height: " + k.width + "px;"), n(f), o = !0
                    }
                }()
            }

            function R() {
                e(!S)
            }

            function n(t) {
                var e = k.hasRound ? k.width : .9 * k.width;
                t.innerHTML = "<svg  width='" + k.width + "' height='" + e + "' viewBox='0,0 " + k.width + " " + k.width + "' xmlns='http://www.w3.org/2000/svg'></svg>", (B = t.getElementsByTagName("svg")[0]).innerHTML = "";
                var o, i, r, n, l, a, s, d, h, u, c, f, w, g, v, p, x, m = function () {
                    k.gradId = k.brightnessId + "Cgrad";
                    var t = "<defs> <radialGradient id='" + k.gradId + "' cx='50%' y='30%'> ";
                    return t += " <stop name='brightness' offset='5%' stop-color='" + k.brightnessCol + "' /> <stop offset='25%' stop-color='" + k.brightnessCol + "'  /> <stop offset='45%' stop-color='" + k.fill + "' /> <stop offset='93%' stop-color='" + k.fill + "' /> <stop offset='98%' stop-color='" + k.devBordStartCol + "' /> </radialGradient> </defs> <defs><radialGradient id='" + k.gradId + "1' cx='50%' y='50%'> ", t += " <stop offset='80%' stop-color='" + k.devBordStartCol + "'/>", t += "  <stop offset='90%' stop-color='" + k.devBordStopCol + "'  />", t += "  <stop offset='93%' stop-color='" + k.devBordStopCol + "'  />", t += " <stop offset='98%' stop-color='" + k.devBordStartCol + "' />", t += " <stop offset='100%' stop-color='" + k.devBordStartCol + "'  />", t += "</radialGradient> </defs>"
                }() + (o = "<ellipse name='flip' ", i = k.width / 2 - k.strokeWidth, r = k.hasRound ? i : .43 * k.width, o += " cx='" + k.width / 2 + "' cy='" + k.width / 2 + "'  rx='" + i + "' ry='" + r + "' stroke='" + k.devBorderCol + "' stroke-width='" + 2 * k.strokeWidth + "'  fill='url(#" + k.gradId + "1)' /> <ellipse cx='" + k.width / 2 + "' cy='" + k.width / 2 + "'  rx='" + i + "' ry='" + r + "' stroke='" + k.devBorderCol + "' stroke-width='" + 2 * k.strokeWidth + "'  fill='none' /> ");
                m += function (t, e, o, i, r, n) {
                    (t != t || t < 1 || 50 < t) && (50 < t && (t = 50), t < 1 && (t = 1), console.log('WARNING gigro: "radius oval`s must be digits in percents (from 1 to 50)" '));
                    var l = "<circle  name='flip' ";
                    null == e && (e = k.strokeCol), null == o && (o = k.strokeWidth), null == i && (i = "none"), null == r && (r = k.width / 2), null == n && (n = k.width / 2);
                    for (var a = [Math.round(k.width * t / 100) - o, r, n, e, o, i], s = 0; s < 6; s++)l += E[s] + a[s];
                    return l += "' /> "
                }(y, void 0, 2 * k.strokeWidth, "url(#" + k.gradId + ")"), m += function () {
                    for (var t = "", e = (k.stopAngle - k.startAngle) / k.scaleDivideCount, o = k.width / 2 + 2 * k.strokeWidth - Math.round(y * k.width / 100), i = o + Math.round(y * k.width / 650), r = k.width / 2, n = 400 < k.width ? 4 * k.strokeWidth : 5 * k.strokeWidth / 3, l = 0; l <= k.scaleDivideCount; l++)t += P(!0, o, r, i, r, k.startAngle + l * e, k.strokeCol, n);
                    if (10 < e) {
                        i = o + (i - o) / 2, e /= 5, n /= 2;
                        var a = 5 * k.scaleDivideCount + 1;
                        for (l = 0; l < a; l++)t += P(!0, o, r, i, r, k.startAngle + l * e, k.strokeCol, n)
                    }
                    return t
                }(), m += function () {
                    for (var t, e, o = (k.stopAngle - k.startAngle) / k.scaleDivideCount, i = y * k.width / 150, r = D ? C / 2.4 : C / 2, n = " ", l = k.scaleDivideCount + 1, a = 0, s = 80 < y * k.width / 100, d = 14 < k.scaleDivideCount, h = 0; h < l; h++) {
                        var u = Math.PI / 180 * (k.startAngle + h * o);
                        if (0 != h && h != k.scaleDivideCount || (a = r / 4), 0 == h || h == k.scaleDivideCount || s) {
                            if (d && h % 2 != 0)continue;
                            t = Math.round(k.width / 2 - i * Math.cos(Math.PI / 180 + u)), e = Math.round(k.width / 2 - i * Math.sin(Math.PI / 180 + u)), n += "<text name='flip' text-anchor='middle' font-size='" + (r + a) + "' ", n += " fill='" + k.textCol + "' x='" + t + "' y='" + e + "' >", n += k.minValue + h * Math.round((k.maxValue - k.minValue) / k.scaleDivideCount) + "</text>"
                        }
                    }
                    return n
                }(), m += (n = D ? "50%" : "0%", l = D ? C / 1.42 : C / 1.3, a = k.width * y / 220, s = k.width / 2, d = 4 * k.width / 7, "<defs> <path  id='" + k.id + "labelPath'  d='M " + (s - a + C / 6) + ", " + (d + C / 5) + " C " + (s - a + C / 2) + ", " + d / 2 + " " + (s + a - C / 2) + ", " + d / 2 + " " + (s + a - C / 4) + ", " + d + "' /> </defs><text  x='" + (s - a - C / 6) + "' y='0%'  font-size='" + l + "' fill='" + k.labelCol + "'  text-anchor='middle' > <textPath xlink:href='#" + k.id + "labelPath' startOffset='" + n + "' >" + k.label + "</textPath></text> "), m += (h = S ? V : "?", u = 1.4 * C, c = Math.round(u / 4), f = Math.round(k.width * (.5 + 3 * y / 400)), w = "<rect x='" + (k.width / 2 - 1.1 * u) + "' y='" + (f - 3.2 * c) + "'  width='" + 2.2 * u + "' height='" + (u - .2 * c) + "'  stroke='" + k.devBorderCol + "' stroke-width='" + c / 5 + "'  fill='" + k.devBordStartCol + "' />", w += "<text x='" + k.width / 2 + "' y='" + f + "'  name='text' text-anchor='middle' opacity='0.8'  font-size='" + u + "' fill='" + k.textCol + "' >" + h + "</text> ", w += "<rect name='valuesPane' x='" + (k.width / 2 - 1.15 * u) + "' y='" + (f - 3.25 * c) + "'  width='" + 2.1 * u + "' height='" + (u - .3 * c) + "'  fill='" + k.devBordStartCol + "' opacity='0.1' />"), m += (g = k.width / 2, v = k.width / 2, p = 400 < k.width ? y / 3 : y / 6, x = "<polygon name='arrow' ", x += " points='" + (g + 2 * p) + "," + v + " " + (g + 3 * p) + "," + (v + p) + " ", x += g - Math.round(y * k.width / 110) + "," + v + " " + (g + 3 * p) + "," + (v - p) + "' ", x += " stroke='" + k.arrStrokeCol + "' stroke-width='" + 2 * k.strokeWidth / 3 + "' ", x += " transform='rotate(" + k.alpha + " " + g + " " + v + ")' fill='" + k.arrFillCol + "' /> ", x += "<circle r='" + p / 4 + "' cx='" + g + "' cy='" + v + "' fill='black' />"), B.innerHTML = m, function () {
                    for (var t = B.getElementsByTagNameNS("http://www.w3.org/2000/svg", "stop"), e = 0; e < t.length; e++)t[e].hasAttribute("name") && "brightness" == t[e].getAttribute("name") && (b = t[e]);
                    k.hasFlip && b.addEventListener("click", A);
                    var o, i = "";
                    for (e = 0; e < B.childNodes.length; e++) {
                        o = B.childNodes[e];
                        try {
                            !(o instanceof Text) && o instanceof Node && o.hasAttribute("name") && ("arrow" == (i = o.getAttribute("name")) && (W = o), "text" == i && (M = o), "flip" == i && k.hasFlip && o.addEventListener("click", A), "valuesPane" == i && o.addEventListener("click", R))
                        } catch (t) {
                            console.log(t)
                        }
                    }
                }()
            }

            var E = [" r='", "' cx='", "' cy='", "', stroke='", "' stroke-width='", "' fill='"];

            function P(t, e, o, i, r, n, l, a) {
                null == l && (l = k.strokeCol), null == a && (a = k.strokeWidth);
                var s = "<line ";
                return null == i && (i = k.width / 2), null == r && (r = k.width / 2), s += "x1='" + e + "' y1='" + o + "' x2='" + i + "' y2='" + r + "' ", s += " stroke='" + l + "' stroke-width='" + a + "' ", null != n && 0 != n && (s += " transform='rotate(" + n, s += t ? ", " + k.width / 2 + ", " + k.width / 2 + ")' " : ")' "), s += " /> "
            }

            var l = !1;
            return function () {
                k.owner.innerHTML = "", t = k.brightnessCol;
                try {
                    k.width = Math.round(k.width), k.width % 2 != 0 && k.width++, i = k.width, l = function () {
                        if (k.hasOwnProperty("fontSize")) {
                            var t = a.fontSize;
                            if (t != t || t < 8 || 100 < t)return console.log("ERROR Illegal start parameter fontSize it must be from 8 to 100"), !1;
                            C = t
                        } else(C = Math.round(k.width * y / 340)) < 8 && (C = 8);
                        return!0
                    }(), k.id = s, k.brightnessId = s + "brigID", n(k.owner)
                } catch (t) {
                    throw console.log("measurer.js - ERROR on start device: " + t.toString()), console.log("ON START DEVICE I have parameters:"), l = !1, t
                }
            }(), l ? {flip: A, setValue: function (t) {
                if (null == W)return!1;
                if (t != t || t < k.minValue || t > k.maxValue)return console.log("WARNING out of bounds leave: (" + k.maxValue + " - " + k.minValue + ")  i get: " + t), r(V = "ERR"), !1;
                k.alpha = k.stopAngle - (k.stopAngle - k.startAngle) * (k.maxValue - t) / (k.maxValue - k.minValue);
                var e = "rotate(" + k.alpha + " " + k.width / 2 + " " + k.width / 2 + ")";
                return W.setAttribute("transform", e), V = t, S && r(V), !0
            }, brightness: function (t) {
                return null != b && (b.setAttribute("stop-color", t), k.brightnessCol = t, !0)
            }, getBrightness: t, showValue: e} : null
        }(h))
    }
    return d
}
</script>

<!--   plotter JS func for draw chart  -->
<script>
    /**
     *
     * @param t - canvas owner HTML element(block type)
     * @param m - chart width
     * @param g - chart height
     * @param e - object start properties
     * @returns {
     *              setAxisLabels: setAxisLabels,   // labels beside axis ends(arrow)
                    create: buildGraph,  // starts process build and draw chart have 3 parameters
                                              //    - name, array, edges(object)
                    hasVisibleValues: hasSetPointValues, // has visible values on points of chart
                    chartColor: setChartColor, // color of chart
                 }
     * @constructor
     */
    function Plotter(t, m, g, e) {
        if (null == t && !(t instanceof HTMLElement))return console.log("'painter' parameter must be HTML container. I get: " + t), null;
        if (m != m || g != g || m < 40 || g < 40)return console.log("plotter.js:  WARNING wrong width or height parameters"), null;
        var y, v, p, w, b, M, L = {borderCol: "#623", bgCol: "#faf9e5", axisCol: "#541", labelCol: "#255"}, n = t, T = Math.round(g / 100), H = Math.round(g / 250);
        H < 1 && (H = 1);
        var k, A, C, z = !1, P = "#776", O = H, S = !1, D = {}, E = Math.round(g / 25), N = "", j = "";

        function B(t, e, n) {
            if (!e || !(e instanceof Array) && !e.hasOwnProperty("values") || e.length < 1)return console.log("plotter.js buildGraph [wrong parameter:second parameter must be array with numerical values or object with values and labels(see plotter.js function buildGraph]"), !1;
            if ("string" != typeof t)return console.log("buildGraph [wrong parameter: first parameter must be string values"), !1;
            if (k = t, e instanceof Array)A = e, S = !1; else {
                if (!(e.values instanceof Array && 0 < e.values.length))return console.log('(plotter.js)Error First member object toDraw must have name "values" and contains array of numerical values'), !1;
                A = e.values, S = !!(e.hasOwnProperty("xAxisLabels") && e.xAxisLabels instanceof Array && e.xAxisLabels.length == e.values.length) && e.xAxisLabels
            }
            !function (t) {
                var e = {};
                t && t.hasOwnProperty("min") && t.hasOwnProperty("max") ? (e.min = t.min, e.max = t.max) : (e.min = A[0], e.max = A[0], A.forEach(function (t) {
                    return t != t ? (console.log("array for chart contains not numbers:" + t), !1) : (e.min > t && (e.min = t), e.max < t && (e.max = t), !0)
                }), e.min == e.max && (0 == e.min ? (e.max = 10, e.min = -10) : (e.max = 0 < e.max ? 2 * e.max : e.min, e.min = e.min < 0 ? 2 * e.min : e.min)));
                D.min = e.min, D.max = e.max
            }(n);
            var r, o, i, a, l, s, x, h, c, f, u = function () {
                var t, e = {}, n = Math.abs(D.min - D.max), r = 0, o = 0, i = (n = 4 < n && n < 10.1 ? 11 : n) < 10 ? -1 : 1;
                for (; !((t = n / Math.pow(10, i * r)) < 101 && 10 < t);)r++;
                if (r *= i, e.pow = r, (t = Math.round(t) + 1) <= 31)o = t, t = Math.pow(10, r); else if (t <= 61) {
                    for (; t % 2 != 0;)t++;
                    o = t / 2, t = 2 * Math.pow(10, r)
                } else if (t < 91) {
                    for (; t % 3 != 0;)t++;
                    o = t / 3, t = 3 * Math.pow(10, r)
                } else o = 25, t = 4 * Math.pow(10, r);
                return e.count = o, e.vOd = t, e.ySpace = (p - b) / (o + 2), function (t) {
                    var e = 0;
                    if (D.max < 0) {
                        for (; D.max + t.vOd * e < 0;)e++;
                        t.startDash = t.count + e - 1, t.xAxisPos = p - (t.count + 1) * t.ySpace
                    } else if (0 < D.min) {
                        for (; 0 < D.min + e * t.vOd;)e--;
                        t.startDash = e + 1, t.xAxisPos = p
                    } else if (0 <= D.max && D.min <= 0) {
                        for (; D.min + t.vOd * e < 0;)e++;
                        t.startDash = e, t.xAxisPos = p - e * t.ySpace
                    }
                }(e), e
            }(), d = (w - v - 3 * T) / (A.length + 1);
            return r = A.length, o = d, i = u, y.innerHTML = "", G(), c = v + "," + (p + T) + " " + v + "," + (b + M) + " " + (v - T) + "," + (b + M) + " " + v + "," + b + " " + (v + T) + "," + (b + M) + " " + v + "," + (b + M), y.innerHTML += "<polyline  points='" + c + "' stroke='" + L.axisCol + "'  stroke-width='" + H + "'  />", x = i.xAxisPos, h = v - T + "," + x + " " + (w - M) + "," + x + " " + (w - M) + "," + (x - T) + " " + w + "," + x + " " + (w - M) + "," + (x + T) + " " + (w - M) + "," + x, y.innerHTML += "<polyline points='" + h + "' stroke='" + L.axisCol + "' ' stroke-width='" + H + "' />", function (t) {
                if (!(g < 260)) {
                    var e, n = "", r = v + E / 3, o = t.count + 2, i = t.startDash;
                    o < i ? (i = o, I(Math.round(t.xAxisPos + t.ySpace / 2)), V(t, (1 - t.startDash) * t.vOd, 1)) : i < 0 ? (i = 0, I(Math.round(t.xAxisPos - t.ySpace / 2)), V(t, (1 - t.startDash) * t.vOd, 1)) : V(t, 0, t.startDash);
                    for (var a = 0; a < o; a++)e = t.xAxisPos - (a - i) * t.ySpace, n += "<line x1='" + v + "' y1='" + e + "' x2='" + r + "'  y2='" + e + "'  stroke-width='" + H / 2 + "' stroke='" + L.axisCol + "'  fill='black' />", n += "<line x1='" + v + "' y1='" + e + "' x2='" + w + "' y2='" + e + "'  stroke-width='" + H / 5 + "' stroke='#ccc'  fill='#fff' />";
                    y.innerHTML += n
                }
            }(i), a = i.xAxisPos, l = "<text  x ='" + (v + 2 * T) + "' y='" + (b + M) + "'  font-size='" + E + "' text-anchor='start'  fill='" + L.labelCol + "' >" + j + "</text>", s = "<text  x='" + (m - M) + "' y='" + (a + (2 * E < g - a ? 1.5 * E : -.2 * E)) + "' ' text-anchor='end' fill='" + L.labelCol + "'  font-size='" + E + "' >" + N + "</text>", y.innerHTML += s + l, function (t, e, n) {
                for (var r, o = "", i = n <= b ? n + E / 3 : n - E / 3, a = p - 2 * T, l = b + 2 * T, s = 1; s < t; s++)o += "<line x1='" + (r = v + s * e) + "' y1='" + n + "'  x2='" + r + "' y2='" + i + "'  stroke='" + L.axisCol + "' stroke-width='" + H / 2 + "' /> ", o += "<line x1='" + r + "' y1='" + a + "'  x2='" + r + "' y2='" + l + "'  stroke='#ccc' stroke-width='" + H / 5 + "' /> ";
                S && function (t, e) {
                    var n = S.length, r = E - T;
                    r < 10 && (r = E);
                    var o = p < e + r ? e - E / 3 : e + 1.2 * r, i = 1;
                    20 < n ? i = 3 : 10 < n && (i = 2);
                    for (var a, l = '<text x="' + v + '" y="' + o + '"  font-size="' + r + '"  fill="' + L.labelCol + '" >' + S[0] + "</text>", s = 1; s < n; s++)a = v + s * t, s % i == 0 && (l += '<text x="' + a + '" y="' + o + '"  font-size="' + r + '" text-anchor="middle" fill="' + L.labelCol + '" >' + S[s] + "</text>");
                    y.innerHTML += l
                }(e, n), y.innerHTML += o
            }(r, o, i.xAxisPos), f = k, y.innerHTML += "<text x='" + m / 2 + "' + y='" + 1.2 * E + "'  font-size='" + E + "' text-anchor='middle' fill='" + L.labelCol + "' style='font-style:italic;text-decoration:underline;' ' >" + f + "</text>", function (t, e, n) {
                var r, o, i, a = " fill='" + L.bgCol + "' stroke='" + P + "' stroke-width='" + O + "' />", l = 1.2 * H, s = n.ySpace, x = p - n.startDash * s, h = s / n.vOd, c = v, f = "<g name='chart'>", u = 1;
                20 < t.length ? u = 4 : 15 < t.length ? u = 3 : 10 < t.length && (u = 2);
                for (i = 1; i < t.length; i++)F(t[i - 1], t[i]) && (r = x - h * t[i - 1], o = x - h * t[i], f += "<line x1='" + c + "' y1='" + r + "' x2='" + (c + e) + "' y2='" + o + "' " + a, z && i % u == 0 && (f += "<circle cx='" + c + "' cy='" + r + "' r='" + l + "' " + a, f += "<text x='" + c + "' y='" + (r - 4 * H) + "' text-anchor='middle'  fill='black' font-size='" + E + "' >" + t[i - 1] + "</text>")), c += e;
                t.length < 2 && (o = x - h * t[0]);
                f += "<circle cx='" + c + "' cy='" + o + "' r='" + l + "' " + a, z && (f += "<text x='" + c + "' y='" + (o - 4 * H) + "' text-anchor='middle'  fill='black' font-size='" + E + "' >" + t[i - 1] + "</text>");
                f += "</g>", y.innerHTML += f
            }(A, d, u), function () {
                var t = z ? "-" : "+";
                y.innerHTML += '<text x="' + (w - E / 2) + '" y="' + (.9 * E + T) + '"  font-size="' + (E + 2 * H) + '" font-weight="bold" text-anchor="middle" fill="#065" >' + t + '</text><rect name="toggle" x="' + (w - E) + '" y="' + T + '" width="' + E + '" height="' + E + '" fill="white" opacity="0.5" stroke="' + L.borderCol + '"  stroke-width="' + H / 3 + '" />';
                for (var e = 0; e < y.childNodes.length; e++) {
                    var n = y.childNodes[e];
                    n instanceof Text || !n.hasAttribute("name") || "toggle" != n.getAttribute("name") || (n.onclick = function () {
                        return z = !z, B(k, {values: A, xAxisLabels: S}, D), 0
                    })
                }
            }(), !0
        }

        function G() {
            y.innerHTML = "<rect name='border' x='" + (T - 2) + "' y='" + (T - 2) + "'   rx='" + 4 * H + "' ry='" + 4 * H + "'  height='" + (g + 4) + "' width='" + (m + 4) + "' stroke='" + L.borderCol + "' stroke-width='" + H + "' fill='" + L.bgCol + "' />"
        }

        function I(t) {
            var e, n = M, r = 1.4 * M;
            for (e = '<path d="'; n < w;)e += "M" + n + "," + t + " L" + (n + r) + "," + t + " ", n += 2 * M;
            e += '" stroke="#ec0" stroke-width="' + 2 * H + '" />', y.innerHTML += e
        }

        function x(t) {
            return"string" == typeof t && 4 < t.length ? v + 2.5 * E : v - 3 * H
        }

        function V(t, e, n) {
            var r = h(t, e + t.vOd), o = h(t, (t.count - t.startDash) * t.vOd);
            e = h(t, e);
            var i = p - t.ySpace * n + E / 3, a = p - t.ySpace * t.count + E / 3, l = ' fill="' + L.labelCol + '" font-size="' + E + '" text-anchor="end" ', s = '<text x="' + x(e) + '" y="' + i + '" ' + l + " >" + e + '</text><text x="' + x(r) + '" y="' + (i - t.ySpace) + '" ' + l + " >" + r + "</text>";
            y.innerHTML += s, s = '<text x="' + x(o) + '" y="' + a + '" ' + l + " >" + o + "</text>", y.innerHTML += s
        }

        function h(t, e) {
            return 0 == e || Math.abs(e) < 1e-7 ? 0 : Math.abs(e) < .1 ? (e = Math.round(1e3 * e), console.log("rounded number=" + e), e / 100 + "*E-2") : .1 < Math.abs(e) && Math.abs(e) < 1e3 || 0 == e ? (Math.round(e) != e && (e = Math.round(100 * e) / 100), e + "") : (e = (e = e / Math.pow(10, t.pow) + "").length < 3 ? e += ".0" : e.substring(0, 2)) + "*E" + t.pow
        }

        function F(t, e) {
            return!(t < D.min || t > D.max) && !(e < D.min || e > D.max)
        }

        function r(t) {
            C && (C.innerHTML = "", t.innerHTML = "")
        }

        return function () {
            for (var t in L)e && e.hasOwnProperty(t) && (L[t] = e[t]);
            n.width = m, n.height = g, n.innerHTML = "<svg  width='" + m + "' height='" + g + "' viewBox='0,0 " + m + " " + g + "' xmlns='http://www.w3.org/2000/svg'></svg>", g -= 2 * T, m -= 2 * T, y = n.getElementsByTagName("svg")[0], v = 4 * T + 1.3 * E, M = 3 * T, p = g - 2 * T, w = m - 2 * T, b = 2 * T, E < 10 && (!0, E = 12), G()
        }(), {setAxisLabels: function (t, e) {
            N = t, j = e
        }, create: B, hasVisibleValues: function (t) {
            z = t
        }, chartColor: function (t) {
            P = t
        }, simpleChart: function (t, f) {
            if (f.max && f.min && !(0 < t.getElementsByTagName("svg").length)) {
                var u, s, x, d, m, g, h = t.width - 3 * T, c = t.height - 3 * T, y = c - 5 * T, v = E + 2 * T, p = h - 4 * T, w = p / 6;
                for (u in t.innerHTML = "<svg  width='" + h + "' height='" + c + "' viewBox='0,0 " + h + " " + c + "' xmlns='http://www.w3.org/2000/svg'></svg>", (C = t.getElementsByTagName("svg")[0]).setAttribute("style", "cursor:pointer"), C.onclick = function () {
                    r(t), t.setAttribute("class", "noSize")
                }, function () {
                    for (var t in u = 1, s = f.min, x = f.max, g = 0, m = v + (d = y / (x - s)) * x, C.innerHTML += '<rect x="10" y="10" rx="' + 5 * H + '" ry="' + 5 * H + '" width="' + (h - 20) + '" height="' + (c - 20) + '" fill="' + L.bgCol + '" stroke="' + L.borderCol + '" stroke-width="' + H + '" />', f)"min" != t && "max" != t && (0 == g && 0 < f[t].points.length && (g = (p - w) / f[t].points.length), e = f[t].name, n = f[t].color, r = T + u * E, C.innerHTML += '<text x="' + 3 * T + '" y="' + r + '" fill="' + n + '"  font-size="' + E + '" >' + e + "</text>", u++);
                    var e, n, r, o, i, a, l;
                    0 < x && s < 0 && (o = w, i = p, a = m, l = E, C.innerHTML += '<text x="' + (o - T) + '" y="' + (a + l / 2) + '"  stroke="' + L.axisCol + '" stroke-width="' + 2 * H / 3 + '"  font-size="' + 2 * l / 3 + '" text-anchor="end" >0</text>', C.innerHTML += '<line x1="' + o + '" y1="' + a + '" x2="' + i + '"  y2="' + a + '" stroke="' + L.axisCol + '" stroke-width="' + H / 2 + '" />')
                }(), f)"min" != u && "max" != u && e(f[u].points);
                var b = !1
            }
            function e(t) {
                t instanceof Array && 0 < t.length && ("number" == typeof t[0] ? function (t) {
                    for (var e = t[0], n = t[0], r = '<polyline points="', o = 0; o < t.length; o++)t[o] > n && (n = t[o]), t[o] < e && (e = t[o]), r += w + o * g + "," + (m - d * t[o]) + " ";
                    r += '" fill="none" stroke="' + f[u].color + '"  stroke-width="' + H + '" />', n = Math.round(n), e = Math.round(e), M(n, e, m - d * n, m - d * e, f[u].color), C.innerHTML += r
                }(t) : function (t) {
                    for (var e, n, r, o, i = Math.round(2 * E / 3), a = t[0].val, l = t[0].val, s = '<polyline points="', x = [], h = 0; h < t.length; h++)if (o = t[h].val, a < o && (a = o), o < l && (l = o), s += (n = w + h * g) + "," + (r = m - d * o) + " ", t[h].svg && (r < 60 && (r = 60), y - 60 < r && (r = y - 60), (e = t[h].svg).setAttribute("x", n - e.getAttribute("width") / 3), e.setAttribute("y", r - e.getAttribute("height") + 4), x[h] = e), t[h].text) {
                        var c = t[h].text.split(/\n/);
                        C.innerHTML += '<line x1="' + n + '" y1 ="' + v + '"  x2="' + n + '" y2="' + (y - c.length * i) + '" stroke="' + L.axisCol + '"  stroke-width="' + H / 3 + '" />', 1 == c.length ? C.innerHTML += '<text x="' + n + '" y="' + y + '"  font-size="' + i + '" text-anchor="middle"  stroke="' + L.labelCol + '" stroke-width="1" >' + t[h].text + "</text>" : k(n, c, i)
                    }
                    for (h in s += '" fill="none" stroke="' + f[u].color + '"  stroke-width="' + H + '" />', C.innerHTML += s, a = Math.round(a), l = Math.round(l), M(a, l, m - d * a, m - d * l, f[u].color), x)C.appendChild(x[h])
                }(t))
            }

            function M(t, e, n, r, o) {
                var i = "", a = b ? p : p - E;
                b = !b;
                var l = 'stroke="' + o + '"  stroke-width="' + H / 2 + '" ', s = 'font-size="' + 2 * E / 3 + '" text-anchor="end" ';
                i += '<line x1="' + w + '" y1="' + r + '" x2="' + p + '" y2="' + r + '" ' + l + " />", i += '<text x="' + a + '" y="' + (r - 2) + '" ' + l + s + ">" + e + "</text>", i += '<line x1="' + w + '" y1="' + n + '" x2="' + p + '" y2="' + n + '" ' + l + " />", i += '<text x="' + a + '" y="' + (n + 2 * E / 3) + '" ' + l + s + ">" + t + "</text>", C.innerHTML += i
            }

            function k(t, e, n) {
                for (var r = y - (e.length - 1) * n + 2 * H, o = 0; o < e.length; o++)C.innerHTML += '<text x="' + t + '" y="' + (r + o * n) + '" font-size="' + n + '" text-anchor="middle" stroke="' + L.labelCol + '" stroke-width="1" >' + e[o] + "</text>"
            }
        }, clearSimpleChart: r}
    }
</script>

<!--  show last values as measurers panel with thingspeak.com gauges -->
<script>
    var devPanel = '<table align="center">\
<tr style="border: 1px solid #cccccc;">\
<td>\
<h3 align="center">Температура на улице</h3>\
<iframe width="450" height="260" frameborder="0"\
        src="https://thingspeak.com/channels/495353/widgets/2027" allowtransparency></iframe>\
</td>\
<td>\
<h3 align="center">Давление</h3>\
<iframe width="450" height="260" frameborder="0"\
        src="https://thingspeak.com/channels/495353/widgets/12985" allowtransparency></iframe>\
</td>\
</tr>\
<tr>\
<td>\
<h3 align="center">Температура в школе</h3>\
<iframe width="450" height="260" frameborder="0"\
        src="https://thingspeak.com/channels/495353/widgets/12983"></iframe>\
</td>\
<td>\
<h3 align="center">Влажность в школе</h3>\
<iframe width="450" height="260" frameborder="0"\
        src="https://thingspeak.com/channels/495353/widgets/12984"></iframe>\
</td> </tr></table>';

    /**
     *  show all measurers in one
     */
    function showAllSensors() {
        owner.style.width = '98%';
        owner.innerHTML = devPanel;
    }

</script>





</body></html>